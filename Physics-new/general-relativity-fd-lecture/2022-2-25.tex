\documentclass[hyperref, a4paper]{article}

\usepackage{geometry}
\usepackage{titling}
\usepackage{titlesec}
% No longer needed, since we will use enumitem package
% \usepackage{paralist}
\usepackage{enumitem}
\usepackage{footnote}
\usepackage{marginnote}
\usepackage{enumerate}
\usepackage{amsmath, amssymb, amsthm}
\usepackage{mathtools}
\usepackage{bbm}
\usepackage{cite}
\usepackage{graphicx}
\usepackage{subfigure}
\usepackage{physics}
\usepackage{tensor}
\usepackage{siunitx}
\usepackage[version=4]{mhchem}
\usepackage{tikz}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{autobreak}
\usepackage[ruled, vlined, linesnumbered]{algorithm2e}
\usepackage{nameref,zref-xr}
\zxrsetup{toltxlabel}
\zexternaldocument*[gr-]{../relativity/relativistic}[relativistic.pdf]
\zexternaldocument*[optics-]{../optics/optics}[optics.pdf]
\zexternaldocument*[solid-]{../solid/solid}[solid.pdf]
\zexternaldocument*[kt-]{../topological-phases-reading-notes/kt}[kt.pdf]
\usepackage[colorlinks,unicode]{hyperref} % , linkcolor=black, anchorcolor=black, citecolor=black, urlcolor=black, filecolor=black
\usepackage[most]{tcolorbox}
\usepackage{prettyref}

% Page style
\geometry{left=3.18cm,right=3.18cm,top=2.54cm,bottom=2.54cm}
\titlespacing{\paragraph}{0pt}{1pt}{10pt}[20pt]
\setlength{\droptitle}{-5em}
\preauthor{\vspace{-10pt}\begin{center}}
\postauthor{\par\end{center}}

% More compact lists 
%\setlist[itemize]{
%    itemindent=17pt, 
%    leftmargin=1pt,
%    listparindent=\parindent,
%    parsep=0pt,
%}

% Math operators
\DeclareMathOperator{\timeorder}{\mathcal{T}}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\legpoly}{P}
\DeclareMathOperator{\primevalue}{P}
\DeclareMathOperator{\sgn}{sgn}
\newcommand*{\ii}{\mathrm{i}}
\newcommand*{\ee}{\mathrm{e}}
\newcommand*{\const}{\mathrm{const}}
\newcommand*{\suchthat}{\quad \text{s.t.} \quad}
\newcommand*{\argmin}{\arg\min}
\newcommand*{\argmax}{\arg\max}
\newcommand*{\normalorder}[1]{: #1 :}
\newcommand*{\pair}[1]{\langle #1 \rangle}
\newcommand*{\fd}[1]{\mathcal{D} #1}
\DeclareMathOperator{\bigO}{\mathcal{O}}

% TikZ setting
\usetikzlibrary{arrows,shapes,positioning}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{decorations.markings}
\tikzstyle arrowstyle=[scale=1]
\tikzstyle directed=[postaction={decorate,decoration={markings,
    mark=at position .5 with {\arrow[arrowstyle]{stealth}}}}]
\tikzstyle ray=[directed, thick]
\tikzstyle dot=[anchor=base,fill,circle,inner sep=1pt]
\usetikzlibrary{fadings}
\usetikzlibrary{patterns}
\usetikzlibrary{shadows.blur}
\usetikzlibrary{shapes}

% Algorithm setting
% Julia-style code
\SetKwIF{If}{ElseIf}{Else}{if}{}{elseif}{else}{end}
\SetKwFor{For}{for}{}{end}
\SetKwFor{While}{while}{}{end}
\SetKwProg{Function}{function}{}{end}
\SetArgSty{textnormal}

\newcommand*{\concept}[1]{{\textbf{#1}}}

% Support for tensor double arrows.
\renewcommand{\tensor}[1]{ \stackrel{\leftrightarrow}{\vb*{#1}}}

% Embedded codes
\lstset{basicstyle=\ttfamily,
  showstringspaces=false,
  commentstyle=\color{gray},
  keywordstyle=\color{blue}
}

% Reference formatting
\newrefformat{fig}{Figure~\ref{#1} on page~\pageref{#1}}

% Color boxes
\tcbuselibrary{skins, breakable, theorems}
\newtcbtheorem[number within=section]{warning}{Warning}%
  {colback=orange!5,colframe=orange!65,fonttitle=\bfseries, breakable}{warn}
\newtcbtheorem[number within=section]{note}{Note}%
  {colback=green!5,colframe=green!65,fonttitle=\bfseries, breakable}{note}

% Correctly displaying equation number in section titles
\pdfstringdefDisableCommands{\def\eqref#1{(\ref{#1})}}

\newcommand{\grnote}{\href{../relativity/relativistic.pdf}{this note}}

\title{Prof. Bambi on General Relativity}
\author{Jinyuan Wu}

\begin{document}

\maketitle

This is a note about Prof. Cosimo Bambi's lecture on general relativity from February 25 to April 8, 2022.

This lecture is about the 1-2 chapters in \cite{bambi2018introduction}. Nothing quite interesting.
\cite{bambi2018introduction} itself is very detailed and it seems I don't really need to take much notes.

\section{Relativistic kinetics}

\subsection{The Christoffel symbols of spherical coordinates}

The Christoffel symbol of spherical coordinates, given in (1.83) in \cite{bambi2018introduction}, can be 
calculated automatically in \href{spherical-coordinate-differential-geometry.nb}{this Mathematica notebook}.

\subsection{Derivation of special relativity}

Section~2.1 and 2.2 seem to be based on Chapter 1 and 2 of Landau's book about field theory. 
The arguments have been summarized in Section~\ref{gr-sec:principle-special-relativity} in \grnote.

Section~2.3 derives the Lorentz transformations by Wick rotation of Euclidean rotation in $d = 4$
-- (2.18) is actually just $\tau = \ii t$ in condensed matter physics.
A rotation on $xy$ has the form of (2.20) and we have $C_4^2 = 6$ rotations. Adding 4 translations,
we get the total 10 generators of the rotation group in $\mathbb{R}^4$, and hence the Lorentz transformations
in the (3+1)-dimensional Minkowski spacetime.

Equations from (2.22) to (2.27) are trying to relate the parameter of $\mathbb{R}^4$ rotations to the relative 
velocity of the two reference frames.

Note that since the rotation group $SO(4)$ is not Abelian, Lorentz transformations do not commute in general. \marginnote{Problem~2.3}

The time coordinate in the reference frame attached to a particle (i.e. in the reference frame the particle 
is at rest) is called the \concept{proper time} of the particle, usually denoted as $\tau$.
Since 
\[ \marginnote{(2.36) and (2.37)}
    \dd{s^2} = - \left( c^2 - \left(\pdv{x}{t}\right)^2 - \left(\pdv{y}{t}\right)^2 - \left(\pdv{z}{t}\right)^2 \right) \dd{t^2} = - \left( 1 - \frac{v^2}{c^2} \right) c^2 \dd{t^2} = - \frac{c^2}{\gamma^2} \dd{t^2} = - c^2 \dd{\tau}^2,
\] 
we have 
\begin{equation}
    \dd{t} = \gamma \dd{\tau}.
\end{equation}
Since a Lorentz transformation keeps the metrics, we have 
\[
    \dd{t} \dd{V} = \dd{\tau} \dd{V_0},
\]
where $\dd{V_0}$ is the volume metrics in the reference frame attached to the particle. This can also by checked 
by noting that (here $\vb*{v}$ is along the $x$ axis)
\[ \marginnote{from (2.45)}
    \begin{aligned}
        \dd{x'} \wedge \dd{t'} &= (-\gamma v \dd{t} + \gamma \dd{x}) \wedge (\gamma \dd{t} - \gamma v \dd{x} / c^2) \\
        &= \gamma^2 \dd{x} \wedge \dd{t} + \frac{\gamma^2 v^2}{c^2} \dd{t} \wedge \dd{x} \\
        &= \gamma^2 \left( 1 - \frac{v^2}{c^2} \right) \dd{x} \wedge \dd{t} = \dd{x} \wedge \dd{t}.
    \end{aligned}
\]
Therefore, 
\begin{equation} \marginnote{(2.44)}
    \dd{V} = \frac{\dd{V_0}}{\gamma}.
\end{equation}

\subsection{Aberration of light and superluminal motion}

We should note that \emph{Lorentz contraction} of length (see for example (2.43)) is often \emph{not} 
\marginnote{(2.48) to (2.57)} the length change we \emph{observe} when an object is moving fast.
The point here is that to measure a line we need to detect light signals from its two ends, and generally 
speaking, two signals arriving at our detector start their journeys at different time points, while on the 
other hand, from the way we derive Lorentz contraction ((2.41) and (2.42)) \marginnote{(2.41) and (2.42)}
we are dealing with events happening at the same time point in the laboratory frame of reference. 
The conclusion is $l$ in (2.43) is often not the length we \emph{see} of a moving object.

The fact that the ``distance'' we see is actually not the authentic space distance between two events with the 
same time in a given frame of reference means that when calculating the velocity, we are taking the time
derivative of two points at different time points, or in other words, taking the derivative of a distance 
with respect to a time not coherent with the current frame of reference. In this way, some superfluous
``superluminal'' movement can occur. Consider, for example, the case of \prettyref{fig:superluminal}. 
Suppose at $t$ a beam of light is emitted from the ejected material, and it arrives at the detector at $t'$.
We therefore have 
\begin{equation} \marginnote{(2.51), (2.52)}
    \begin{aligned}
        c(t' - t) &= L = \sqrt{(D - vt \cos \varphi)^2 + v^2 t^2 \sin^2 \varphi} \\
        &= D - vt \cos \varphi + \bigO(v^2 t^2 / D^2).
    \end{aligned}
\end{equation}
Therefore, we have 
\begin{equation} \marginnote{(2.53)}
    t' = \frac{D}{c} + t (1 - \beta \cos \varphi).
\end{equation}
Now we try to evaluate the \emph{apparent} velocity on the $y$ direction, which is $\dv*{y}{t'}$.
Note that only $\dv*{y}{t}$ is bounded by $c$, while $\dv*{y}{t'}$ does not have an upper bound.
Actually, we have 
\begin{equation} \marginnote{(2.54)}
    \dv{y}{t'} = \dv{y}{t} \dv{t}{t'} = v \sin \varphi \times \frac{1}{1 - \beta \cos \varphi}.
\end{equation}
The maximum is shown to be $v \gamma$. Here we can see the apparent velocity is obtained using $t'$ \marginnote{(2.57)}
as the time, which is not $x^0$ in the frame of coordinate attached to the observer. 

\begin{figure}
    \centering
    \input{coordinate-figures/superluminal.tex}
    \caption{Superluminal motion of a ejected material from a galaxy}
    \label{fig:superluminal}
\end{figure}

\subsection{Time dilation and cosmic ray muons}

The lifetime of an unstable particle is measured according to its proper time, and this causes the difference \marginnote{Sec.~2.6}
between the prediction of Newtonian and relativistic theories of the flux of the particle after traveling a 
certain distance. This is actually a piece of strong evidence of special relativity.

\section{Relativistic mechanics (single particle)}

\subsection{The action}

We know the Lagrangian of a Newtonian free particle is 
\begin{equation} \marginnote{(3.1)}
    L = \frac{1}{2} m g_{ij} \dot{x}^i \dot{x}^j.
    \label{eq:newton}
\end{equation}
The natural generalization is 
\begin{equation}
    L = \frac{1}{2} m g_{\mu \nu} \dot{x}^\mu \dot{x}^\nu.
    \label{eq:generalized-lagrangian}
\end{equation}
Note, however, the meaning of $\dot{x}$ is not clear here: $g_{\mu \nu} \dd{x^\mu} \dd{x^\nu}$ is already a 
covariant value, and to make the whole expression covariant, the ``time'' used in the time derivative $\dot{x}$
should also be a relativistic scalar, which can only be the proper time $\tau$. Similarly, when calculating 
the action, we need to integrate \eqref{eq:generalized-lagrangian} over $\tau$. So the final action is 
\begin{equation}
    S = \int \dd{\tau} L, \quad L = \frac{1}{2} m g_{\mu \nu} \dv{x^\mu}{\tau} \dv{x^\nu}{\tau}.
    \label{eq:gr-action-1}
\end{equation}
We can repeat the process in (1.71) \marginnote{(1.71)} and find that the EOM is 
\begin{equation} \marginnote{(3.6)}
    \dv[2]{x^\mu}{\tau} + \Gamma\indices{^\mu_\nu _\rho} \dv{x^\nu}{\tau} \dv{x^\rho}{\tau} = 0.
    \label{eq:eom-sr}
\end{equation}
Actually Newton's second law can also be written into this form (again see the discussion around (1.71)),
but this time we are working with $\mu, \nu, \rho = 0, 1, 1, 3$, not just $1, 2, 3$.
Note that \eqref{eq:eom-sr} is actually the geodesic equation. 

\eqref{eq:eom-sr} is about $\dv*{x^\mu}{\tau}$, which is the tangent vector of the trajectory of the particle
and is manifestly a 4-vector. Its components are 
\begin{equation}
    \dv{x^\mu}{\tau} = \dv{x^\mu}{t} \dv{t}{\tau} = (\gamma c, \gamma \vb*{v}).
    \label{eq:4-velocity-single}
\end{equation}

\begin{note*}{}
    When we say some expression is \concept{manifestly} covariant, we mean the expression is built up by 
    tensor and Einstein summation notation and can be automatically decided as covariant.
\end{note*}

We have a more ``geometric'' version of \eqref{eq:newton}. Since 
\[
    \dd{l} = \sqrt{g_{ij} \dot{x}^i \dot{x}^j} \dd{t}
\]
is an increasing function of the integrand of \eqref{eq:newton}, the action corresponding to \eqref{eq:newton} is equivalent to 
\begin{equation}
    S = \int \dd{l}.
    \label{eq:newton-line}
\end{equation}
Similarly, we may guess the version of \eqref{eq:newton-line} corresponding to \eqref{eq:gr-action-1} 
is 
\begin{equation}
    S = \int \abs*{\dd{s}} = \int \sqrt{- \dd{s^2}}.
\end{equation}
This is indeed the case, since actually by the definition of proper time, we have 
\begin{equation} \marginnote{(3.4)}
    c^2 \dd{\tau^2} = - \dd{s^2} = - g_{\mu \nu} \dd{x^\mu} \dd{x^\nu},
\end{equation}
and therefore $L$ in \eqref{eq:gr-action-1} is just a constant, and we have $S \propto \int \dd{\tau}$.

A question is what is the relativistic version of mechanics of \emph{massless} particles. \marginnote{Sec.~3.3}
Since $m$ in the action is just a constant, the geodesic equation \eqref{eq:eom-sr} still works. 
The Lagrangian therefore can still be written as 
\begin{equation} \marginnote{(3.38)}
    L = - mc \sqrt{- g_{\mu \nu} \dot{x}^\mu \dot{x}^\nu},
\end{equation}
but now $m$ should be a constant interpreted as a \emph{coupling constant} with the dimension of mass.

\subsection{Particle collision}

Relativistic scattering theory is important in particle physics. Consider a typical reaction:
\begin{equation} \marginnote{(3.41)}
    A + B \longrightarrow C + D.
    \label{eq:reaction-abcd}
\end{equation}
Suppose we are working in a frame of reference where $A$ is at rest. Suppose $B$ moves along the $x$ axis.
Then we have 
\begin{equation} \marginnote{(3.43)}
    p_A^\mu = (m_A c, 0, 0, 0), \quad p_B^\mu = (m_B \gamma c, m_B \gamma v, 0, 0).
    \label{eq:p-a-b-4-mom}
\end{equation}
After the reaction, the energies and the momenta of $C$ and $D$ can be quite complicated, so we just 
try to find some general constraints imposed on them. A reaction is possible if and only if both 
energy conservation and momentum conservation hold. The momentum conservation condition can be 
satisfied by working in a reference frame where the total 3-momentum of the system vanishes, and 
this dictates 
\begin{equation} \marginnote{(3.44)}
    p_C^\mu = (\sqrt{m_C^2 c^2 + \vb*{p}_C^2}, \vb*{p}_C), \quad p_D^\mu = (\sqrt{m_D^2 c^2 + \vb*{p}_C^2}, - \vb*{p}_C).
    \label{eq:p-c-d-4-mom}
\end{equation}
Now we just need to impose the energy conservation constraint. Naively doing so is hard because energy itself 
is not a scalar. However, there \emph{is} a conserved relativistic scalar: we have  
\begin{equation}
    p^\text{i}_\mu p^{\text{i} \mu} = p^\text{f}_\mu p^{\text{f} \mu} \eqqcolon M^2 c^2,
\end{equation}
where $M$ is named the \concept{invariant mass}. Note that we can evaluate the LHS in the reference frame of 
\eqref{eq:p-a-b-4-mom} and the RHS in the reference frame of \eqref{eq:p-c-d-4-mom}, and this gives 
\begin{equation} \marginnote{(3.48)}
    \left(m_{A} c+m_{B} \gamma c\right)^{2}-m_{B}^{2} \gamma^{2} v^{2}=\left(m_{C} c+m_{D} c\right)^{2} - (2 \vb*{p}_C)^2,
\end{equation}
which can be simplified into 
\begin{equation} \marginnote{(3.49)}
    2 m_{A} m_{B} \gamma=m_{C}^{2}+m_{D}^{2}+2 m_{C} m_{D}-m_{A}^{2}-m_{B}^{2} - 4 \vb*{p}_C^2 / c^2.
\end{equation}
The minimum energy of $B$ is 
\begin{equation} \marginnote{(3.50)}
    E_B^\text{th} = p_B^0 c = m_B \gamma c^2 = \frac{\left(m_{C}^{2}+m_{D}^{2}+2 m_{C} m_{D}-m_{A}^{2}-m_{B}^{2}\right) c^{2}}{2 m_{A}}.
\end{equation}
This is called the \concept{threshold energy}, because if $E_B < E_B^\text{th}$, \eqref{eq:reaction-abcd} cannot happen.

The procedure can be repeated for different processes and from this we can find another fact about collision that 
head-on collision is more effective than fixed-target collision.

\section{Relativistic perfect fluid}

The topic of relativistic idea fluid is discussed in Problem 2.1 and 2.2. \marginnote{Problem 2.1, 2.2}
First of all, we always have 
\[
    T^{00} = \epsilon = \rho_m c^2,
\]
where $\epsilon$ is the energy density of the fluid in the rest frame, and $\rho_m$ is the mass density.
In a perfect fluid, when we are in the rest-frame, there is no flow, and since momentum is carried by fluid flow,
the density of momentum is also zero, i.e.
\[
    T^{i0} = 0.
\]
The argument used in non-relativistic perfect fluid can be transplanted here for $T^{ij}$: since an idea fluid 
is isotropic, and it cannot hold shear force, as long as the time scale we are interested is long enough to 
hide how the fluid responds to an external shear force, we can assume all shear force components in $T^{ij}$
are zero. Thus we have 
\[
    T^{ij} = \pmqty{\dmat{p, p, p}}.
\]
Putting everything together, we get 
\begin{equation} \marginnote{(2.60)}
    T^{\mu \nu} = \pmqty{\dmat{\epsilon, p, p, p}}.
    \label{eq:rest-frame-perfect-fluid-t}
\end{equation}

Now we can get $T^{\mu \nu}$ in any coordinate system with a Lorentz transformation.
Applying the Lorentz transformation on $x$ direction:
\begin{equation} \marginnote{(2.28)}
    \Lambda\indices{^\mu_\nu} = \pmqty{\dmat{\gamma & - \gamma \beta \\ - \gamma \beta & \gamma, 1, 1}},
    \label{eq:lorentz-x}
\end{equation}
we get (the process can be found in \href{relativistic-ideal-fluid.nb}{this Mathematica notebook})
\begin{equation}
    T'^{\mu \nu} = \pmqty{\frac{p \beta ^2}{1-\beta ^2}+\frac{\epsilon }{1-\beta ^2} & -\frac{\epsilon  \beta }{1-\beta
    ^2}-\frac{p \beta }{1-\beta ^2} \\
  -\frac{\epsilon  \beta }{1-\beta ^2}-\frac{p \beta }{1-\beta ^2} & \frac{\epsilon  \beta ^2}{1-\beta
    ^2}+\frac{p}{1-\beta ^2} }.
    \label{eq:x-moving-fluid-t}
\end{equation}
Suppose the speed of the frame of reference after \eqref{eq:lorentz-x} in the rest frame of the fluid is $v$,
we find \eqref{eq:x-moving-fluid-t} is the energy-momentum tensor of a fluid moving with the velocity of 
$- v \vu*{e}_x$.  \marginnote{Problem~2.2}

\eqref{eq:x-moving-fluid-t} is not covariant. We need to generalize it into a \marginnote{Liang Sec.~6.5} 
covariant version. Solely with information provided in \eqref{eq:x-moving-fluid-t}, the covariant version 
cannot be decided, because systems other than a perfect fluid can also has a energy-momentum tensor like 
\eqref{eq:rest-frame-perfect-fluid-t}. Another way to see the point is to note that velocity of the fluid is 
different on different points, and a global Lorentz transformation cannot turn the fluid into the state of rest. 
We can do local Lorentz transformation, but this distorts the components of $\eta^{\mu \nu}$, but when deriving 
\eqref{eq:rest-frame-perfect-fluid-t} we have $\eta = \diag(-1, 1, 1, 1)$.  

The generic covariant energy-momentum tensor of a perfect fluid is % TODO: derivation
\begin{equation}
    T^{\mu \nu} = \left( \rho_m + \frac{p}{c^2} \right) U^\mu U^\nu + p \eta^{\mu \nu} = \frac{1}{c^2} \left( \epsilon + p \right) U^\mu U^\nu + p \eta^{\mu \nu}.
    \label{eq:general-fluid}
\end{equation}
Note that $p$ and $\epsilon$ in \eqref{eq:general-fluid} are defined in a special frame of reference, but this does 
not eliminate the covariance of \eqref{eq:general-fluid}, because for a fluid there is indeed a special frame of reference, i.e. the rest frame of itself. 

Finally we check whether \eqref{eq:general-fluid} reduces to \eqref{eq:x-moving-fluid-t} if the velocity 
of the fluid is globally $- v \vu*{e}$. When in the rest frame of reference, we have 
\begin{equation}
    U^\mu = \pmqty{c \\ 0 \\ 0 \\ 0},
\end{equation}
and \eqref{eq:general-fluid} reads 
\[
    T^{\mu \nu} = \frac{1}{c^2} (\epsilon + p) \pmqty{\dmat{c^2, 0, 0, 0}} + p \pmqty{\dmat{-1, 1, 1, 1}}, 
\]
which is just \eqref{eq:rest-frame-perfect-fluid-t}. After a global Lorentz transformation \eqref{eq:lorentz-x}, 
we have 
\[
    U'^\mu = \Lambda\indices{^\mu_\nu} U^\nu = \pmqty{\gamma c \\ - \gamma \beta c \\ 0 \\ 0}.
\]
Substituting this into \eqref{eq:general-fluid}, we indeed come back to \eqref{eq:x-moving-fluid-t}. (The process is in \href{relativistic-ideal-fluid.nb}{this Mathematica notebook}). 

\section{Electromagnetism}

\subsection{The action}

In this section we try to establish a relativistic covariant version of electromagnetism.
First, the EOM of particles 
\begin{equation} \marginnote{(4.1)}
    m \ddot{\vb*{r}} = e \vb*{E} + \frac{e}{c} \dot{\vb*{r}} \times \vb*{B} 
\end{equation}
has to change, because it allows particles to be accelerated without an upper bound. 
Second, the Maxwell equations must be written into a covariant form. \marginnote{(4.2) to (4.5)}
We've already done this in \href{../advanced-electrodynamics/lecture-12-15.pdf}{this note}, 
but here we need to repeat the procedure with $g_{\mu \nu} = \diag(-1, 1, 1, 1)$ and in the Gaussian 
unit system. 

We will find the action 
\begin{equation}
    \begin{aligned}
        S&=S_{\mathrm{m}}+S_{\mathrm{int}}+S_{\mathrm{em}}, \\
        S_{\mathrm{m}} &=-m c \int_{\Gamma} \sqrt{-\dd s^{2}}, \\
        S_{\mathrm{int}} &=\frac{e}{c} \int_{\Gamma} A_{\mu} \dd x^{\mu}, \\
        S_{\mathrm{em}} &=-\frac{1}{16 \pi c} \int_{\Omega} F^{\mu v} F_{\mu v} \dd^{4} \Omega
    \end{aligned}
\end{equation}
recovers to the relativistic version of Newton's second law and Maxwell equations.  \marginnote{(4.15) and (4.12)}
Here $\dd[4]{\Omega} = c \dd{t} \dd[3]{\vb*{r}}$.
Note that the definition of $F_{\mu \nu}$ here differs with $F_{\mu \nu}$ with $g_{\mu \nu} = (1, -1, -1, -1)$
with a global minus sign.

The interaction action $S_{\text{int}}$ can also be written into a ``hydrodynamic'' form. \marginnote{(4.19)}
Before doing so, we need to find a relativistic description of flowing. We start from a collective quantity that 
is invariant between frames of reference, which is total electric charge here. 
The density is 
\begin{equation}
    \rho = \dv{Q}{V} = \gamma \dv{Q}{V_0}
\end{equation}
and is not a Lorentz scalar (because $\dv*{Q}{V_0}$ is one). We tentatively define a manifestly 4-vector 
\begin{equation}
    J^\mu = \dv{Q}{V_0} U^\mu = \frac{\rho}{\gamma} (\gamma c, \gamma \vb*{v}) = (\rho c, \rho \vb*{v}),
\end{equation}
where $U^\mu$ in the many-body case is the coarse-grained 4-velocity as defined in \eqref{eq:4-velocity-single},
and in the case where there is only one particle is just \eqref{eq:4-velocity-single}. 
It can be immediately found that $\partial_\mu J^\mu = 0$, and therefore $J^\mu$ is a good definition of 4-current.

Now in the case with only one particle in the electrodynamic field, we have 
\[
    \rho(\vb*{r}', t) = e \delta(\vb*{r}' - \vb*{r}(t)), \quad \Gamma = \{ (t, \vb*{r}(t)) \}_t,
\]
so
\[
    \begin{aligned}
        S_\text{int} &= \frac{1}{c} \int \rho \dd{V}  \int_\Gamma \dd{x^\mu} A_\mu = \frac{1}{c} \int \rho \dd{V} \int_{t_1}^{t_2} A_\mu \dv{x^\mu}{t} \dd{t} \\
        &= \frac{1}{c^2} \int_\Omega \underbrace{c \dd{t} \dd{V}}_{\dd[4]{x}} \rho \dv{x^\mu}{t} A_\mu \\
        &= \frac{1}{c^2} \int_\Omega \dd[4]{x} J_\text{single particle}^\mu A_\mu .
    \end{aligned}
\]
Since $J^\mu$ in a continuum is just the coarse-grained version of $\sum J^\mu_\text{single particle}$,
the many-body version of $S_\text{int}$ is 
\begin{equation} \marginnote{(4.19)}
    S_\text{int} = \frac{1}{c^2} \int_\Omega \dd[4]{x} J^\mu A_\mu.
\end{equation}

\subsection{Maxwell equations}

Maxwell equations don't need to be generalized, because they are already invariant.

\section{Riemannian geometry}

\subsection{Christoffel symbol and covariant derivative}

Here we briefly list some important formulae:
\begin{equation} \marginnote{(5.15)}
    \nabla_{\nu} u^{\mu}= \partial_\nu u^\mu +\Gamma_{\nu \rho}^{\mu} u^{\rho},
    \label{eq:u-derivative}
\end{equation}
and from this and $\nabla_\nu (u^\mu w_\mu) = 0$, recursively we have 
\begin{equation} \marginnote{(5.50)}
    \begin{aligned}
        \nabla_{\lambda} T_{\nu_{1} \nu_{2} \ldots \nu_{s}}^{\mu_{1} \mu_{2} \ldots \mu_{r}}=\frac{\partial}{\partial x^{\lambda}} T_{\nu_{1} \nu_{2} \ldots \nu_{s}}^{\mu_{1} \mu_{2} \ldots \mu_{r}}
        &\underbrace{+\Gamma_{\lambda \sigma}^{\mu_{1}} T_{\nu_{1} \nu_{2} \ldots \nu_{s}}^{\sigma \mu_{2} \ldots \mu_{r}}+\Gamma_{\lambda \sigma}^{\mu_{2}} T_{\nu_{1} \nu_{2} \ldots \nu_{s}}^{\mu_{1} \sigma \ldots \mu_{r}}+\ldots+\Gamma_{\lambda \sigma}^{\mu_{r}} T_{\nu_{1} \nu_{2} \ldots \nu_{s}}^{\mu_{1} \mu_{2} \ldots \sigma}}_{r \text { terms }} \\
        &\underbrace{-\Gamma_{\lambda \nu_{1}}^{\sigma} T_{\sigma \nu_{2} \ldots \nu_{s}}^{\mu_{1} \mu_{2} \ldots \mu_{r}}-\Gamma_{\lambda \nu_{2}}^{\sigma} T_{\nu_{1} \sigma \ldots \nu_{s}}^{\mu_{1} \mu_{2} \ldots \mu_{r}}-\ldots-\Gamma_{\lambda \nu_{s}}^{\sigma} T_{\nu_{1} \nu_{2} \ldots \sigma}^{\mu_{1} \mu_{2} \ldots \mu_{r}}}_{s \text { terms }},
        \end{aligned}
        \label{eq:multiple-index-derivative}
\end{equation}
and specifically, we have 
\begin{equation} \marginnote{(5.49)}
    \nabla_{\mu} W_{\nu}=\frac{\partial W_{\nu}}{\partial x^{\mu}}-\Gamma_{\mu \nu}^{\rho} W_{\rho}.
    \label{eq:w-derivative}
\end{equation}
These formulae can be remembered using the following key points:
\begin{itemize}
    \item $\nabla_\nu u^\mu$ is used as a definition of covariant derivative and hence the sign before the $\Gamma$ term is +. 
    \item There is only one upper index $\mu$, and it can't be on $u$ in the $\Gamma$ term. 
    The lower index $\nu$ must be reflected on the Christoffel symbol. 
    So the $\Gamma$ term has to be the contraction of $\Gamma^\mu_{\nu \cdot}$ and $u$, and hence $\Gamma^\mu_{\nu \rho} u^\rho$.
    \item Then from $\nabla_\nu (u^\mu w_\mu) = 0$ we get \eqref{eq:w-derivative}. The $-$ sign comes from the fact 
    that the two $\Gamma$ terms in \eqref{eq:u-derivative} and \eqref{eq:w-derivative} must cancel with each other.
    There are now two lower indices $\mu, \nu$, and neither of them should be on $W$ (or otherwise the upper index
    of $\Gamma$ has no lower index to contract with). So both of them should be on $\Gamma$, and the $\Gamma$ 
    term is therefore $- \Gamma_{\mu \nu}^\rho W_\rho$.
    \item Then \eqref{eq:multiple-index-derivative} can be obtained by remembering that $\lambda$ is always on the $\Gamma$ symbol, $r$ terms are like \eqref{eq:u-derivative}, and $s$ terms are like \eqref{eq:w-derivative}.
\end{itemize}

The Christoffel symbol is given by 
\begin{equation} \marginnote{Conventions}
    \Gamma_{\nu \rho}^{\mu}=\frac{1}{2} g^{\mu \lambda}\left(\frac{\partial g_{\lambda \rho}}{\partial x^{\nu}}+\frac{\partial g_{\nu \lambda}}{\partial x^{\rho}}-\frac{\partial g_{\nu \rho}}{\partial x^{\lambda}}\right).
\end{equation}
This formula can be remembered by noticing  
\begin{itemize}
    \item it starts with $\frac{1}{2} g^{\mu \lambda}$. The $\mu$ index is an upper index, so it must come with 
    another upper index $\lambda$, which, then, have to be contracted with a lower index in the brackets.
    \item The first and the second term can be obtained by placing the lower $\lambda$ on $g$. The third term 
    is obtained by placing $\lambda$ on $x$.
    \item There are two positive terms, so the signs have to be $+, +, -$, because after $\nu \leftrightarrow \rho$,
    the first and the second terms swaps, so they must bear the same sign.
\end{itemize}
From this we find (5.52). \marginnote{(5.52)} Here we give a step by step derivation of $\nabla_\sigma g^{\mu \nu}$.
\begin{itemize}
    \item Using the tricks described above, we have 
    \[
        \nabla_\sigma g^{\mu \nu} = \partial_\sigma g^{\mu \nu} + \Gamma^\mu_{\sigma \delta} g^{\delta \nu} + \Gamma^\nu_{\sigma \delta} g^{\delta \mu}.
    \]
    Note that the second and third terms only differ with $\mu \leftrightarrow \nu$.
    \item Using the tricks described above, we have 
    \[
        \Gamma^\mu_{\sigma \delta} = \frac{1}{2} g^{\mu \lambda} (\partial_\sigma g_{\lambda \delta} + \partial_\delta g_{\lambda \sigma} - \partial_\lambda g_{\sigma \delta}).
    \]
    \item Both $\partial_\sigma g^{\mu \nu}$ and $\partial_\sigma g_{\mu \nu}$ appear. Since 
    \[
        \partial_\sigma (g_{\lambda \delta} g^{\delta \alpha}) = \partial_\sigma \delta^\alpha_\lambda = 0,
    \]
    we have 
    \[
        g_{\lambda \delta} \partial_\sigma g^{\delta \alpha} + g^{\delta \alpha} \partial_\sigma g_{\lambda \delta} = 0.
    \]
    By multiply $g_{\alpha \beta}$ to the equation (i.e. taking the inverse of $g^{\delta \alpha}$), we have 
    \[
        \partial_\sigma g_{\lambda \beta} = - g_{\alpha \beta} g_{\lambda \delta} \partial_\sigma g^{\delta \alpha}.
    \]
    \item Therefore \[
        \begin{aligned}
            \Gamma^\mu_{\sigma \delta} g^{\delta \nu} &= \frac{1}{2} g^{\mu \lambda} g^{\delta \nu} (- g_{\alpha \delta} g_{\lambda \beta} \partial_\sigma g^{\beta \alpha} - g_{\alpha \sigma} g_{\lambda \gamma} \partial_{\delta} g^{\gamma \alpha} + g_{\alpha \delta} g_{\sigma \gamma} \partial_\lambda g^{\lambda \alpha}) \\
            &= - \frac{1}{2} \partial_\sigma g^{\mu \nu} - \frac{1}{2} g^{\delta \nu} g_{\alpha \sigma} \partial_\delta g^{\mu \alpha} + \frac{1}{2} g^{\mu \lambda} g_{\sigma \gamma} \partial_\lambda g^{\gamma \nu} .
        \end{aligned}
    \] 
    Swapping $\mu$ and $\nu$, we have 
    \[
        \Gamma^\nu_{\sigma \delta} g^{\delta \mu} = - \frac{1}{2} \partial_\sigma g^{\mu \nu} - \frac{1}{2} g^{\delta \mu} g_{\alpha \sigma} \partial_\delta g^{\nu \alpha} + \frac{1}{2} g^{\nu \lambda} g_{\sigma \gamma} \partial_\lambda g^{\gamma \mu}.
    \]
    So we find 
    \[
        \Gamma^\mu_{\sigma \delta} g^{\delta \nu} + \Gamma^\nu_{\sigma \delta} g^{\delta \mu} = - \partial_\sigma g^{\mu \nu}, 
    \]
    and therefore we complete the proof.
\end{itemize}

\subsection{Riemann tensor}

Now we go on to Riemann tensor. \marginnote{(5.80) to (5.83)} First we explain the equivalence between (5.67) and (5.83) (if we take the 
latter as a definition of the Riemann tensor and ignore its explicit expression in the second equation).
The transport of $u^\mu$ along an infinitesimal vector $p^\mu$, (5.80), is derived from 
\[
    \begin{aligned}
        0 &= p^\mu \nabla_\mu u^\nu = p^\mu (\partial_\mu u^\nu + \Gamma^\nu_{\mu \sigma} u^\sigma) \\
        &= u^\nu_{A \to B} - u^\nu + p^\mu \Gamma^\nu_{\mu \sigma} u^\sigma
    \end{aligned}
\]
and therefore 
\begin{equation} \marginnote{(5.80)}
    u^\nu_{A \to B} = u^\nu - p^\mu \Gamma^\nu_{\mu \sigma} u^\sigma.
\end{equation}
Now we have 
\[
    u^\mu_{A \to B \to D} = (1 + q^\nu \nabla_\nu) u^\mu_{A \to B} = (1 + q^\nu \nabla_\nu) (1 + p^\rho \nabla_\rho) u^\mu,
\]
and similarly
\[
    u^\mu_{A \to C \to D} = (1 + p^\rho \nabla_\rho) (1 + q^\nu \nabla_\nu) u^\mu.
\]
So 
\[
    \begin{aligned}
        u^\mu_{A \to B \to D} - u^\mu_{A \to C \to D} &= q^\nu p^\rho (\nabla_\nu \nabla_\rho - \nabla_\rho \nabla_\nu) u^\mu \\
        &= q^\nu p^\rho (\nabla_\nu \nabla_\rho - \nabla_\rho \nabla_\nu) u_\sigma g^{\mu \sigma} \\ 
        &= q^\nu p^\rho g^{\mu \sigma} R\indices{^\lambda_{\sigma \rho \nu}} u_\lambda .
    \end{aligned}
\]
The equivalence between (5.67) and (5.83) is therefore reduced to the following equation:
\begin{equation}
    R\indices{^\mu_{\tau \nu \rho}} u^\tau q^\nu p^\rho = q^\nu p^\rho g^{\mu \sigma} R\indices{^\lambda_{\sigma \rho \nu}} u_\lambda.
\end{equation}
We have 
\[
    \begin{aligned}
        \text{LHS} &= g^{\mu \sigma} R_{\sigma \tau \nu \rho} u^\tau q^\nu p^\rho = g^{\mu \sigma} R_{\tau \sigma \rho \nu} u^\tau q^\nu p^\rho, \marginnote{(5.77)} \\
        \text{RHS} &= q^\nu p^\rho g^{\mu \sigma} g^{\tau \lambda} R\indices{_\tau_{\sigma \rho \nu}} u_\lambda = q^\nu p^\rho g^{\mu \sigma} R\indices{_\tau_{\sigma \rho \nu}} u^\tau = \text{LHS},
    \end{aligned}
\]
so indeed (5.67) and (5.83) are equivalent as definitions of the Riemann tensor.

\section{Physics with a background gravitational field}

Note that \cite{bambi2018introduction} uses the term \emph{general relativity} to denote any metric theory of 
gravity. 

\subsection{Absorbing inertial forces into the metric}

\subsection{Absorbing Newtonian gravity into the metric}

In the Newtonian limit, suppose the gravitational potential is $\Phi$, the Lagrangian is 
\begin{equation} \marginnote{(5.3)}
    L = - m c^2 + \frac{1}{2} m \vb*{v}^2 - m \Phi.
\end{equation}
Note that $m c^2 \gg m \vb*{v}^2 / 2, m \Phi$. \marginnote{(5.4)}
This Lagrangian has a natural high-speed completion:
\begin{equation}
    L = - m c \sqrt{c^2 - \vb*{v}^2 + 2 \Phi} = - m c^2 \left( 1 + \frac{- \vb*{\vb*{v}^2} + 2 \Phi}{c^2} + \bigO(\vb*{v}^4 / c^4, \Phi^2 / c^4) \right) .
\end{equation}
Note that this is the Lagrangian of a free-falling particle, and if it's a metric theory, it can be rephrased into 
\begin{equation}
    S = - m c \int \sqrt{- g_{\mu \nu} \dot{x^\mu} \dot{x^\nu}} \dd{t}, \quad \dot{x}^\mu \coloneqq \dv{x^\mu}{t}.
\end{equation}
Now obviously, we have 
\begin{equation} \marginnote{(5.7)}
    g_{\mu \nu} = \pmqty{\dmat{ -\left(1 + \frac{2\Phi}{c^2}\right), 1, 1, 1 }}. \label{eq:metric-with-phi}
\end{equation}
So we find Newtonian gravity is a low-speed, low gravitational force limit of a metric theory with metrics
\eqref{eq:metric-with-phi}. 

Note that it's not necessary that in the low speed limit of the particle and weak gravitational field limit
(actually, since gravitational force can be used to accelerate the particle, a low particle speed already 
implies a weak gravitational field) the only kind of gravitational potential is the Newtonian one.
For example, see \href{https://en.wikipedia.org/wiki/Parameterized\_post-Newtonian\_formalism}{the PPN formalism}.
This is because it's possible that $g_{\mu \nu}$ has components deviate from the Lorentz metrics other 
than $g_{00}$. However, even with the presence of such components, Newtonian gravity is \emph{still} 
the low-speed weak-field theory of gravity, because a particle moving slow enough is \emph{unable to feel} 
these components. This is what is actually shown in Section 6.3. \marginnote{(6.4) to (6.14)}
We see that the derivation ends in (6.14), which is the $g_{00}$ component of \eqref{eq:metric-with-phi} 
and is only about $g_{tt}$ but not other components -- but other components are not \emph{relevant}, anyway.

\subsection{Local inertial reference frame and moving frame}

In this section we show the existence of a local inertial reference frame, i.e. to show that a metric theory 
always satisfy Einstein's equivalence principle. First, we can always diagonalize the metrics at a certain point
by the following coordinate transformation:
\begin{equation}
    \dd{x^\mu} \to \dd{x'^\mu} = e^{\mu'}_\nu \dd{x^\nu},
\end{equation}
where $e^{\mu'}_\nu$'s are obtained by the following diagonalization 
(the eigenvalues are absorbed into $e^{\mu'}_\nu$)
\begin{equation}
    g_{\mu \nu} = e^{\alpha'}_\mu e^{\beta'}_\nu \eta_{\alpha' \beta'}.
\end{equation}
So without loss of generality, we assume 
\begin{equation}
    g_{\mu \nu}(0) = \eta_{\mu \nu}.
\end{equation}
The metric tensor can be expanded as 
\begin{equation} \marginnote{(6.21)}
    g_{\mu v}(x)=g_{\mu v}(0)+\left.\frac{\partial g_{\mu v}}{\partial x^{\rho}}\right|_{0} x^{\rho}+\left.\frac{1}{2} \frac{\partial^{2} g_{\mu v}}{\partial x^{\rho} \partial x^{\sigma}}\right|_{0} x^{\rho} x^{\sigma}+\cdots.
\end{equation}
Now suppose we do the coordinate transformation 
\begin{equation} \marginnote{(6.22)}
    x^{\mu} \rightarrow x^{\prime \mu}=x^{\mu}+\frac{1}{2} \Gamma_{\rho \sigma}^{\mu}(0) x^{\rho} x^{\sigma} + \cdots.
\end{equation}
The inverse is 
\begin{equation}
    x^{\mu}=x^{\prime \mu}-\frac{1}{2} \Gamma_{\rho \sigma}^{\mu}(0) x^{\prime \rho} x^{\prime \sigma}+\cdots,
\end{equation}
so we have 
\begin{equation}
    \frac{\partial x^{\alpha}}{\partial x^{\prime \mu}}=\delta_{\mu}^{\alpha}-\Gamma_{\mu \nu}^{\alpha}(0) x^{\prime \nu}+\cdots.
\end{equation}
Under these transformations we find (6.29), so (6.26) evaluates to zero. \marginnote{(6.26) to (6.29)}
By the definition of $\Gamma^\sigma_{\mu \nu}$, after the transformation, we see all Christoffel symbols become zero, so locally, we get $\nabla_\mu \to g_\mu$, $g_{\mu \nu} \to \eta_{\mu \nu}$, and hence $\{x'^\mu\}$
is a local inertial reference frame.

\subsection{Time slowing down in gravitational field}

As long as gravity is created by the metrics, clocks placed in a gravitational field is slower than a clock 
far from any gravity source. For example, with \eqref{eq:metric-with-phi}, we have 
\begin{equation} \marginnote{(6.34)}
    \dd{\tau}^2 = \left(1 + \frac{2 \Phi}{c^2} \right) \dd{t}^2. \label{eq:time-slow-grativity}
\end{equation} 
When the metrics is not that simple, but the clock moves very slowly, we still have \eqref{eq:time-slow-grativity}.
Note that since gravity is always attractive, $\Phi < 0$, so $\dd{\tau} < \dd{t}$. 

% TODO：GPS

\section{Einstein's gravity}

It's possible to derive Einstein's gravity by field theoretic methods (see \grnote), 
but it's actually more convenient to derive the EOM directly. 

Here we briefly review the line of argumentation in Section 7.1. \marginnote{(Sec. 7.1)}
The list of assumptions is 
\begin{enumerate}
    \item The gravitational field is completely described by the metric tensor.
    \item The field EOMs are tensor equations: general covariance principle.
    \item The field EOMs are at most of second order.
    \item Newtonian limit
    \item $T^{\mu \nu}$ is the source.
    \item In the absence of matter, $g_{\mu \nu} \to \eta_{\mu \nu}$.
\end{enumerate}

From conditions 2 and 5 we have 
\begin{equation} \marginnote{(7.1)}
    G^{\mu \nu} = \kappa T^{\mu \nu},
\end{equation}
where $G^{\mu \nu}$ is a function of the metric tensor (according to condition 1). So now the problem is how to 
assemble a second order tensor with no more than second order derivative of $g_{\mu \nu}$ (according to 
condition 3). The simplest term is $\Lambda g_{\mu \nu}$. Since $R$ is a scalar assembled by 
$R\indices{^\mu}_{\nu \sigma \delta}$, which is made up by first and second order derivatives of the metric tensor,
$R g_{\mu \nu}$ is also a possible term. 

\bibliographystyle{plain}
\bibliography{books-used}

\end{document}