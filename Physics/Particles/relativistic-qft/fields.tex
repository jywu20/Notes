\chapter{三种常见的场和它们的量子化}

\section{概述}

\subsection{正则量子化的大致手续}\label{sec:canonical-general}

在相对论性量子场论中我们仍然要求自由粒子的拉氏量具有最高的对称性，也就是说，在庞加莱群作用下没有变化，
且拉氏量只含有二次项（从而给出线性的运动方程）。%
\footnote{虽然本文主要分析正则量子化，但写出运动方程还是用的是拉氏量。这是更加方便的做法，因为正则表述在理论框架上将时间和空间分开对待了，因此不容易观察哈密顿量在洛伦兹变化之下是不是给出恒定不变的动力学。}
空间平移不变性意味着拉氏量不能显含坐标；空间各向同性意味着拉氏量中的参数必须是标量，不能出现多分量的参数。

在已经写出额拉氏量之后，我们可以计算三种场的哈密顿量，为正则量子化做好准备。
由于我们通常在欧氏空间中写出哈密顿量而在闵可夫斯基时空中讨论拉氏量，需要格外注意一点：闵可夫斯基时空的度规为$(+, -, -, -)$而欧几里得空间的度规为$(+, +, +)$，因此
\[
    A_\mu A^\mu = (\dot{A}^0)^2 - \vb*{A}^2,
\]
上式左边为闵可夫斯基时空中的表达式，右边为欧几里得空间中的表达式。
换而言之，闵可夫斯基时空中的$A_i A^i$和欧几里得空间中的$A_i A^i$差一个负号。

在得到了场的哈密顿量之后，我们据此执行正则量子化。我们接下来需要对场算符施加正则对易或反对易关系。由于空间平移不变性，我们将在动量表象下工作。此外，为了让公式看起来好看一些，我们忽略算符的$\hat{\ }$帽子。
在处理单粒子量子力学坐标表象下的问题时我们同时需要讨论算符$\hat{\vb*{x}}$和可以随意变动的空间坐标$\vb*{x}$，但是在量子场论中几乎从来不需要讨论场变量的取值，因此忽略帽子并不会造成任何问题。
在对自由场论做量子化时为了突出场的作用，我们采用海森堡绘景，即让场发生时间演化。

场算符做傅里叶变换之后的产生湮灭算符的归一化涉及一个微妙的、和相对论特性有关的地方。
考虑到\eqref{eq:relativity-p}，我们有
\[
    \ket{p, \sigma} = \sqrt{2 \omega_{\vb*{p}}} \ket{\vb*{p}, \sigma},
\]
于是设${a}_{\vb*{p}, \sigma}$和${a}^\dagger_{\vb*{p}, \sigma}$为单粒子态$\ket{\vb*{p}, \sigma}$对应的产生湮灭算符，则有
\[
    ({\alpha}_{\vb*{p}, \sigma})^\dagger = \sqrt{2\omega_{\vb*{p}}} {a}_{\vb*{p}, \sigma}^\dagger,
\]
这样场算符的展开式就是
\[
    {\varphi}(x) \propto \sum_\sigma \int \frac{\dd[3]{\vb*{p}}}{\sqrt{(2\pi)^3 2 \omega_{\vb*{p}}}} \left( {a}^\dagger_{\vb*{p}, \sigma} \ee^{\ii p_\mu x^\mu} + {a}_{\vb*{p}, \sigma} \ee^{- \ii p_\mu x^\mu} \right) e_\sigma,
\]
其中$e_\sigma$标记场$\phi$属于的场表示的有限维部分的基底。
或者，既然我们已经转而在三维空间中讨论问题，即已经不再要求洛伦兹协变性了，可以使用三维矢量更加清晰地写出
\begin{equation}
    {\varphi}(\vb*{x}, t) \propto \sum_\sigma \int \frac{\dd[3]{\vb*{p}}}{\sqrt{(2\pi)^3 2 \omega_{\vb*{p}}}} \left( {a}^\dagger_{\vb*{p}, \sigma} \ee^{- \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} + {a}_{\vb*{p}, \sigma} \ee^{\ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} \right) e_\sigma. 
    \label{eq:expanding-field-operator}
\end{equation}
由于三种场都服从克莱因-高登方程，将\eqref{eq:expanding-field-operator}代入\eqref{eq:klein-gordon-eq}会发现$\omega_{\vb*{p}}$和$\vb*{p}$正好服从质壳关系\eqref{eq:mass-shell}。
另一方面，也可以使用相对论协变的积分测度，写出
\begin{equation}
    {\varphi}(\vb*{x}, t) \propto \sum_\sigma \int \frac{\dd[3]{\vb*{p}}}{2 \omega_{\vb*{p}} (2\pi)^{3/2}} \left( {\alpha}^\dagger_{\vb*{p}, \sigma} \ee^{ \ii p_\mu x^\mu} + {\alpha}_{\vb*{p}, \sigma} \ee^{- \ii \pi_\mu x^\mu} \right) e_\sigma. 
    \label{eq:expanding-field-operator-relativity}
\end{equation}

展开式\eqref{eq:expanding-field-operator-relativity}和\eqref{eq:expanding-field-operator}有各自的好处。
\eqref{eq:expanding-field-operator-relativity}给出的产生湮灭算符以及它们产生的单粒子态是洛伦兹协变的，但是在处理对易关系的时候会略有复杂，因为此时产生湮灭算符的对易关系必定也是协变的，因此必须指定
\[
    \comm*{{\alpha}_{\vb*{p}}}{{\alpha}^\dagger_{\vb*{p}'}} \sim \omega_{\vb*{p}} \delta^3 (\vb*{p} - \vb*{p}')
\]
这样的对易关系，或者类似的反对易关系；当然，因为此时使用的积分测度是$\int \dd[3]{\vb*{p}} / (2 \omega_{\vb*{p}})$，这样的对易关系是正确的——无非是$\delta$函数要修改为某种相对论形式而已。
\eqref{eq:expanding-field-operator}给出的产生湮灭算符以及它们产生的单粒子态不是洛伦兹协变的，但是可以简化对易关系以及归一化时使用的积分测度。
例如在对所有的动量模式求和时如果我们选取积分测度为$\int \dd[3]{\vb*{p}}$，那么就需要指定
\[
    \comm*{{a}_{\vb*{p}}}{{a}^\dagger_{\vb*{p}'}} = \delta^3 (\vb*{p} - \vb*{p}'),
\]
或者类似的反对易关系。而如果指定
\[
    \comm*{{a}_{\vb*{p}}}{{a}^\dagger_{\vb*{p}'}} = (2\pi)^3 \delta^3 (\vb*{p} - \vb*{p}'),
\]
此时只需要始终使用积分测度
\[
    \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3}
\]
对所有动量模式求和即可。
两种展开式都是傅里叶变换，因此都能够消除哈密顿量中的导数。

为了避免引起混乱，这里我们统一指定下面使用的归一化常数和记号。
本文采取Peskin和Quantum Field Theory for the Gifted Amateur的归一化常数和记号的一种混合。
前面的$\ket{p}$和$\ket{\vb*{p}}$的区分是Quantum Field Theory for the Gifted Amateur中使用的记号（Peskin中没有引入$\ket{p}$，Peskin中的$\ket{\vb*{p}}$就是本文的$\ket{p}$），而本文中的归一化常数则保持和Peskin一致。
对傅里叶变换，规定对动量求和时积分测度带因子$1/(2\pi)^3$而对坐标求和时积分测度就是$\dd[3]{\vb*{x}}$。
这样，产生湮灭算符的对易关系就是
\begin{equation}
    \comm*{{a}_{\vb*{p}}}{{a}^\dagger_{\vb*{p}'}} = (2\pi)^3 \delta^3 (\vb*{p} - \vb*{p}'),
\end{equation}
或者将相对论协变的$\alpha$算符转化为差一个常数的$a$算符，即令
\begin{equation}
    \alpha^\dagger_{\vb*{p}, \sigma} = \sqrt{2 \omega_{\vb*{p}}} a^\dagger_{\vb*{p}, \sigma},
\end{equation}
就有
\begin{equation}
    \comm*{{\alpha}_{\vb*{p}}}{{\alpha}^\dagger_{\vb*{p}'}} = (2\pi)^3 2 \omega_{\vb*{p}} \delta^3 (\vb*{p} - \vb*{p}').
\end{equation}
反对易关系只需要将$\comm*{\cdot}{\cdot}$改成$\acomm*{\cdot}{\cdot}$即可。
场算符的展开和\eqref{eq:strange-p-state}遵从一样的习惯，为
\begin{equation}
    \varphi(\vb*{x}, t) = \sum_{\sigma} \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3 2 \omega_{\vb*{p}}} \left( {\alpha}^\dagger_{\vb*{p}, \sigma} \ee^{- \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} + {\alpha}_{\vb*{p}, \sigma} \ee^{\ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} \right) e_\sigma,
\end{equation}
或者
\begin{equation}
    {\varphi}(\vb*{x}, t) = \sum_\sigma \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{\sqrt{2 \omega_{\vb*{p}}}} \left( {a}^\dagger_{\vb*{p}, \sigma} \ee^{- \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} + {a}_{\vb*{p}, \sigma} \ee^{\ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} \right) e_\sigma. 
    \label{eq:field-operator-fourier}
\end{equation}
$\ee$指数中的$\ii \omega t - \ii \vb*{p} \cdot \vb*{x}$也可以写成相对论协变形式$\ii p \cdot x$。

对单粒子态，有
\[
    \ket{p, \sigma} = \sqrt{2 \omega_{\vb*{p}}} {a}^\dagger_{\vb*{p}, \sigma} \ket{0},
\]
从而有
\begin{equation}
    \braket{p, \alpha}{q, \beta} = (2\pi)^3 2 \omega_{\vb*{p}} \delta_{\alpha \beta} \delta^3(\vb*{p} - \vb*{q}).
\end{equation}
在某一个给定的时间，将${\phi}(\vb*{x}, t)$作用在真空态上得到
\[
    \begin{aligned}
        {\varphi}(\vb*{x}, t) \ket{0} &= \sum_\sigma \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{\sqrt{2 \omega_{\vb*{p}}}} {a}^\dagger_{\vb*{p}, \sigma} \ee^{- \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} e_{\sigma} \ket{0} \\
        &= \sum_\sigma \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{2 \omega_{\vb*{p}}} \ee^{- \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} e_{\sigma} \ket{p, \sigma}.
    \end{aligned}
\]

这里说明一下为什么我们采取了上面所说的傅里叶变换，而没有，比如说，改变一下正负号选取。
我们知道
\[
    \varphi^\dagger_\sigma (\vb*{x}, t) \ket{0} \sim \ket{\vb*{x}(t), \sigma},
\]
从而
\[
    \mel{0}{\varphi_\sigma (\vb*{x}, t)}{\psi} \sim \text{single particle wavefunction}.
\]
我们希望\eqref{eq:x-p-trans}成立。可以验证，取上述傅里叶变换，可以得到
\[
    \mel{0}{\varphi_\sigma (\vb*{x}, t)}{\psi} \sim \ee^{-\ii p \cdot x} \propto \ee^{\ii \vb*{p} \cdot \vb*{x}},
\]
这正是\eqref{eq:x-p-trans}。因此本节给出的傅里叶变换是正确的。
表面上看这会导致一个疑难，就是
\[
    \varphi^\dagger_\sigma (\vb*{x}, t) \ket{0} \propto \ee^{\ii \omega t},
\]
但是一个单粒子态的演化应该以$\ee^{-\ii \omega t}$为时间演化因子，但是其实这里没有任何问题：此处的$\varphi$是海森堡绘景中的，$\ket*{\vb*{x}}$以$\ee^{\ii \omega t}$时间演化，而实际的单粒子态是没有时间演化的。
那么，现在我们做一个绘景变换，在所有态上乘以一个因子$\ee^{-\ii \omega t}$，那么$\ket*{\vb*{x}}$就没有时间演化了，而实际的单粒子态以$\ee^{-\ii \omega t}$时间演化，这正是正确的薛定谔绘景。

场算符（对应于湮灭算符的场算符）有时候会被粗略地当成“相对论量子力学中的波函数”。

判断应该使用对易关系来量子化场还是应该使用反对易关系来量子化场应当遵守几个条件：
\begin{itemize}
    \item 非平凡性。哈密顿量不应该给出平凡的结果。
    \item 因果性。在某一个时空点施加相互作用只应该产生局域的影响。特别的，在一个时空点做测量不应该对与之间隔（指的是闵可夫斯基时空中的“距离”）为正的时空点产生影响。
    \item 能量正定性。哈密顿量应该可以写成产生湮灭算符的正定二次型，以避免能量无限下降。
\end{itemize}

以上给出的步骤完全描述了场算符的量子化过程。这种使用傅里叶变换得到对角化的哈密顿量的方式有时也称为\concept{正则量子化}，因为它是算符的正则量子化（即施加对易或反对易关系）之后立刻可以完成的。

关于与场算符配套的真空态要说一句：在自由场下，无论采取哪种绘景，真空态$\ket{0}$或者没有时间演化，或者时间演化只是乘上一个复数因子。这是因为真空态一定是哈密顿算符的本征态。
此外，本节采用的量子化方案也体现出了一个重要的物理图像：具有确定能量$E$的粒子在经典极限下就对应着以圆频率$E$振荡的场。

最后，以上将场做傅里叶变换以消去运动方程中的导数的做法在经典情况下当然也适用。容易看出，动量为$\vb*{p}$的粒子模式的经典极限就是波矢为$\vb*{p}$的平面波；相应的，位置为$\vb*{r}$的粒子模式的经典极限就是
\[
    \phi(\vb*{r}') = \delta(\vb*{r}' - \vb*{r}).
\]
以上两个模式的振幅均不确定；量子情况下振幅是分立的而经典情况下则不是。

即使在经典场中，也存在动量和位置不能同时确定的现象。场的量子化带来的不是动量和位置不能同时确定，而是场的振幅是离散化的——经典情况下，平面波的振幅可以任意变化，而量子情况下，${\phi}$（或者别的场算符）的本征值是离散的，此时才能够良定义“粒子”。

在本节剩下的部分中，我们将会看到，标量场和矢量场只能被量子化为玻色场，而旋量场只能被量子化为费米场。
这是\concept{自旋统计定理}的特例，这个定理说，对满足洛伦兹对称性的系统，半整数自旋对应着费米子，而整数自旋对应着玻色子。
在没有洛伦兹对称性时这个结论不一定成立，实际上，对很多具有实际意义的系统——如格点系统——我们甚至没有旋转对称性，所以也无从讨论自旋。

\subsection{经典近似}

一个相对论性量子场论的退化：
\begin{itemize}
    \item 量子性的单个粒子，即系统的基本自由度是坐标和一些额外的离散标签（自旋等），在这里，近似体现在缺乏粒子生灭，对那些本身缺乏粒子生灭的理论，从量子场论退化到单粒子理论没有任何近似。
    \begin{itemize}
        \item 进一步，相对论性单粒子理论通常并没有什么意义，因此非相对论性近似往往也是必要的。
        \item 退化得到的非相对论性单粒子理论也可以做二次量子化，得到一个非相对论性量子场论。这个理论当然可以通过原本的相对论性量子场论做非相对论近似一口气得到。
        \item 还可以完全忽略量子涨落得到经典单粒子理论。
    \end{itemize}
    \item 经典场论。如果原本的相对论性量子场论能够退化成单粒子理论，则它退化成的经典场论和单粒子理论的波动力学具有一样的形式。这就是“把波函数量子化”能够行得通的原因，也是麦克斯韦方程有时候看起来就好像一个波函数的原因——光子没有特别良定义的坐标表象下的单光子量子力学，但是如果硬是要定义一个，那么大体上就是麦克斯韦方程的样子；经典的麦克斯韦方程中的平面波在量子化之后真的就是动量本征态，可以得到坐标-动量不确定性关系，等等。
    \begin{itemize}
        \item 可以做WKB近似，或者说程函近似，得到的$\vb*{k}$和经典单粒子理论是一致的。
    \end{itemize}
\end{itemize}

\section{标量场}

\subsection{实标量场的克莱因-高登方程}\label{sec:k-g-eq}

标量场的拉氏量中只能够出现$\phi$和$\partial_\mu \phi$构成的一次或二次不变量。
$\phi$构造出的一次不变量有$\phi$，二次不变量有$\phi^2$，$\partial_\mu \phi$是矢量，$\partial_\mu \phi$不可能和$\phi$缩并，而由于拉氏量中的参数都是标量它也不可能和参数缩并，因此它只能和自己缩并，得到$\partial_\mu \phi \partial^\mu \phi$。
这样我们得到
\[
    \mathcal{L} = A \phi + B \phi^2 + C \partial_\mu \phi \partial^\mu \phi.
\]
拉氏量中的$\phi$项实际上无关紧要，因为完全可以通过重新定义一个$\phi' = \phi + \const$来把一次项消除掉，于是我们略去这一项。
最后，通过重新定义长度单位和$m$，可以得到
\begin{equation}
    \mathcal{L} = \frac{1}{2} (\partial_\mu \phi \partial^\mu \phi - m^2 \phi^2).
    \label{eq:klein-gordon-lagrangian}
\end{equation}
这个拉氏量导致下面的运动方程：
\begin{equation}
    (\partial_\mu \partial^\mu + m^2) \phi = 0.
    \label{eq:klein-gordon-eq}
\end{equation}
这就是\concept{克莱因-高登方程}，标量场或者说自旋0场的基本运动方程。
可以证明，为了让\eqref{eq:klein-gordon-eq}给出有物理意义的预言（例如不出现无限下降的能量，等等），应当取$m \geq 0$。

实际上，所有场的运动方程均满足克莱因-高登方程。我们将在推导其它场的运动方程之后证明这一点。
这就导致了一个重要的结果。平移生成元在场表示中为\eqref{eq:transition-inf-rep}，从而
\[
    P_\mu P^\mu = - \partial_\mu \partial^\mu,
\]
于是代入\eqref{eq:klein-gordon-eq}，得到
\[
    P_\mu P^\mu \phi = - \partial_\mu \partial^\mu = m^2 \phi,
\]
其中$m$为克莱因-高等方程中出现的那个$m$。也即，通过$P_\mu P^\mu$的表示的本征值（实际上就是它和恒等变换之间差的倍数，因为$P_\mu P^\mu$是卡西米尔元）得到的$m$和场的运动方程得到的$m$是一样的。
这个$m$实际上就是粒子的静质量。在\autoref{sec:sch-eq-from-kg}中我们会看到它就对应着薛定谔方程中的质量。

现在导出标量场的哈密顿表述。计算得到
\begin{equation}
    \pi = \partial_0 \phi = \dot{\phi},
    \label{eq:klein-gordon-pi}
\end{equation}
相应的
\begin{equation}
    \mathcal{H} = \frac{1}{2} \dot{\phi}^2 + \frac{1}{2} (\grad{\phi})^2 + \frac{1}{2} m^2 \phi^2.
\end{equation}
如我们希望的那样，哈氏量密度是正定的。这当然是因为我们适当地选择了$\mathcal{L}$的正负号。

另外，注意到 % TODO：好像我们还从来没有严格定义过下式？
\[
    P_0 = E, \quad P_i \vb*{e}^i = \vb*{p},
\]
在场表示中我们可以写出
\[
    E^2 - \vb*{p}^2 = m^2
\]
或者说
\[
    E^2 = m^2 + \vb*{p}^2.
\]
这正是质壳关系\eqref{eq:mass-shell}。这就提示我们，还有另一种量子化方式：做替换
\[
    E \longrightarrow \hat{E} = \ii \partial_0, \quad \vb*{p} \longrightarrow \hat{\vb*{p}} = - \ii \grad,
\]
则从能量-动量关系就可以得到克莱因-高登方程。
我们不采用这种方案，因为它隐含地引入了太多的假设：算符$E, \vb*{p}$是作用在一个算符场上而不是态矢量上；$E,\vb*{p}$是厄米算符，也即，平移群在此算符场上取幺正表示（注意这一点并不一般成立！例如，场表示中的有限维表示就常常不是幺正的），等等。
为了和经典场论中的记号保持一致，我们后面将用$\omega$代替$E$。
$\omega$或者说场的傅里叶分量的频率在经典场论下有明确意义，而在量子场论的语境下，它实际上对应了这个场的傅里叶分量（粒子产生算符或者湮灭算符）产生/湮灭的粒子的能量$E$。

\subsection{实标量场的正则量子化}

\subsubsection{平面波模式}

无需额外考虑标量场的基，于是对实标量场，可以直接取
\begin{equation}
    {\phi}(\vb*{x}, t) = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{\sqrt{2 \omega_{\vb*{p}}}} \left( {a}^\dagger_{\vb*{p}} \ee^{ - \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} + {a}_{\vb*{p}} \ee^{ \ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} \right),
    \label{eq:expanding-klein-gordon-field}
\end{equation}
显然它是\eqref{eq:klein-gordon-eq}的一个解。相应的使用\eqref{eq:klein-gordon-pi}，有
\begin{equation}
    {\pi}(\vb*{x}, t) = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \  \ii \sqrt{\frac{\omega_{\vb*{p}}}{2}} \left( {a}^\dagger_{\vb*{p}} \ee^{ - \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} - {a}_{\vb*{p}} \ee^{ \ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} \right)
\end{equation}
共轭动量不是洛伦兹协变的。这并不让人意外，因为其定义和时间维的选取有关。
计算得到
\[
    {H} = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{2} \omega_{\vb*{p}} ({a}_{\vb*{p}}^\dagger {a}_{\vb*{p}} + {a}_{\vb*{p}} {a}^\dagger_{\vb*{p}}).
\]

下面把正则对易关系施加到标量场${\phi}$上。
通过计算可以得知，这等价于
\begin{equation}
    \comm*{{a}_{\vb*{p}}}{{a}^\dagger_{\vb*{p}'}} = (2\pi)^3 \delta^3 (\vb*{p} - \vb*{p}'), \quad \comm*{{a}_{\vb*{p}}}{{a}_{\vb*{p}'}} = 0.
    \label{eq:quantization-scalar}
\end{equation}
相应的，反对易关系等价于
\[
    \acomm*{{a}_{\vb*{p}}}{{a}^\dagger_{\vb*{p}'}} = (2\pi)^3 \delta^3 (\vb*{p} - \vb*{p}'), \quad \acomm*{{a}_{\vb*{p}}}{{a}_{\vb*{p}'}} = 0.
\]
将反对易关系代入哈密顿量表达式会导致哈密顿量变成常数，因此这是平凡解，舍去。
将对易关系代入哈密顿量的表达式，得到
\begin{equation}
    {H} = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \omega_{\vb*{p}} \left({a}_{\vb*{p}}^\dagger {a}_{\vb*{p}}  + \frac{1}{2} \comm*{{a}_{\vb*{p}}}{{a}^\dagger_{\vb*{p}}} \right).
    \label{eq:hamiltonian-of-klein-gordon}
\end{equation}
容易看出第二项实际上是发散的。
产生这种发散的原因在于，相对论性量子场论不会被用于处理动量特别高的问题（在那里需要新的物理，通常称为“紫外端的物理”），因此所谓的对整个动量空间的积分实际上只是对动量空间中一块很大的区域的积分。
在这种意义下，\eqref{eq:hamiltonian-of-klein-gordon}中的第二项是一个很大的常数，称为\concept{真空零点能}。因此在讨论全空间内的问题时，可以丢弃它得到等效的哈密顿量（注意此时哈密顿量的正定性实际上被破坏了）%？真的吗？
\begin{equation}
    {H} = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \omega_{\vb*{p}} {a}_{\vb*{p}}^\dagger {a}_{\vb*{p}}.
\end{equation}
这是一个福克空间上的$1$粒子算符。它表明自由场情况下单粒子携带能量为$\omega_{\vb*{p}}$。
通过反复使用对易关系\eqref{eq:quantization-scalar}以及真空态被湮灭算符作用后得到$0$这一事实，可以计算出
\begin{equation}
    {H} {a}_{\vb*{p}}^\dagger \ket{0} = \omega_{\vb*{p}} {a}_{\vb*{p}}^\dagger \ket{0}.
\end{equation}
因此正如我们预期的那样，单粒子态$\ket{\vb*{p}}$是哈密顿量的本征态。

真空零点能的出现实际上意味着原来的哈密顿量中的各个项是不对易的，因此真空态的能量不能是零，如果它是零，那么由哈密顿量的正定性，哈密顿量中的每一项作用在真空态上都会得到零，于是真空态是哈密顿量的每一项的本征态，这就产生了矛盾。
% TODO:实际上不对易的算符还是可以有共同本征态的，以上说法不正确，需要进一步说明
不对易性是纯粹的量子概念，因此真空零点能只有在量子场论中才能够得到良好的定义。
如果哈密顿量中所有的项都是彼此对易的，就不会有真空零点能。有时真空零点能的存在也称为量子涨落，因为即使在真空态，也不是所有的物理量都有完全确定的值。

需要注意的是如果我们讨论的问题不是定义在全空间上的，可能不能直接把真空零点能丢弃。例如，设有两块无穷大的金属板，它们施加的边界条件会让\eqref{eq:expanding-klein-gordon-field}中的一些模式为零，通过计算可以发现板间的真空零点能小于板外，从而产生一个板之间的吸引力。

总之，标量场需要使用正则对易关系来量子化，不能用反对易关系。因此标量场描述$0$自旋玻色子。

\subsubsection{守恒量}

场的动量为
\[
    P_i = \int \dd[3]{\vb*{x}} \pi \partial_i \phi,
\]
从而
\begin{equation}
    {\vb*{P}} = - \int \dd[3]{\vb*{x}} {\pi} \grad{{\phi}} = \int \dd[3]{\vb*{x}} \vb*{p} {a}^\dagger_{\vb*{p}} {a}_{\vb*{p}} + \text{vaccum zero-point item},
\end{equation}
正如我们预期的，场的动量也是单粒子算符，并且正好就是所有粒子的动量之和。

标量场没有内禀自由度，因此也不携带自旋角动量。我们无需讨论其自旋角动量。

\subsubsection{实标量场的传播子}

通过\eqref{eq:quantization-scalar}中的归一化常数我们可以写出动量空间中的同时间两点关联函数：
\begin{equation}
    \mel{0}{a_{\vb*{p}} a^\dagger_{\vb*{q}}}{0} = (2\pi)^3 \delta(\vb*{p} - \vb*{q}), \quad \mel{0}{a^\dagger_{\vb*{p}} a_{\vb*{q}}}{0} = 0.
\end{equation}
代入展开式\eqref{eq:expanding-klein-gordon-field}，就得到实空间下的两点关联函数（这两个点可以不等时）：
\begin{equation}
    D(x-y) = \mel{0}{\phi(x) \phi(y)}{0} = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{2 \omega_{\vb*{p}}} \ee^{-\ii p \cdot (x - y)} |_{p^0 = E_{\vb*{p}}} .
\end{equation}
被积分的$\ee$指数是洛伦兹不变的，积分测度也是洛伦兹不变的，等式左边也是洛伦兹不变的——本该如此，既然标量场是洛伦兹不变的。
这个式子可以写成更加明显的洛伦兹不变的形式。
容易看出
\[
    \int \dd{\omega} \frac{1}{(\omega - \omega_{\vb*{p}})(\omega + \omega_{\vb*{p}}  - \ii 0^+)} \ee^{-\ii p \cdot (x - y)} = - \pi \ii \frac{1}{2 \omega_{\vb*{p}}} \ee^{-\ii p \cdot (x - y)} |_{p^0 = E_{\vb*{p}}} ,
\]
这里积分号表示计算积分主值，负号是由于$\ee^{-\ii \omega t}$在下半平面衰减而不是上半平面。
于是就有
\begin{equation}
    \begin{aligned}
        D(x-y) &= 2 \int \frac{\dd[4]{p}}{(2\pi)^4} \frac{\ii}{(\omega - \omega_{\vb*{p}})(\omega + \omega_{\vb*{p}}  - \ii 0^+)} \ee^{-\ii p \cdot (x - y)} \\
        &= 2 \int \frac{\dd[4]{p}}{(2\pi)^4} \frac{\ii}{p^2 - m^2 - \ii 0^+ (\omega - \omega_{\vb*{p}})} \ee^{-\ii p \cdot (x - y)}.
    \end{aligned}
\end{equation}
这个积分看起来非常不自然：我们需要忽略其中一个极点，并且取另一个极点的积分主值，然后再将结果乘以$2$。
这种不自然性暗示$\mel*{0}{\phi(x) \phi(y)}{0}$可能并不是非常好用的表示两点关联的方式——它的确不是，因为当$x^0 < y^0$时它还是会给出一个值，并没有很好地反映因果性。
对这个量的有意义的使用局限于$x^0 > y^0$时。

在等时情况下上式实际上可以进一步往下计算。设$x^0-y^0=0$，$\vb*{x} - \vb*{y} = \vb*{r}$，采用球坐标系，有
\[
    \begin{aligned}
        D(x-y) &= \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{2 \omega_{\vb*{p}}} \ee^{\ii \vb*{p} \cdot \vb*{r}} \\
        &= \frac{2\pi}{(2\pi)^3} \int \frac{p^2 \dd{p}}{2 \omega_{\vb*{p}}} \frac{\ee^{\ii p r} - \ee^{- \ii p r}}{\ii p r} \\
        &= - \frac{\ii}{2 (2\pi)^2 r} \int_{-\infty}^\infty \frac{p \dd{p}}{\sqrt{p^2 + m^2}} \ee^{\ii p r},
    \end{aligned}
\]
被积函数是一个多值函数，从$\ii m$到$\ii \infty$，$- \ii m$到$- \ii \infty$作割线，即确定一个单值分支。
将积分路径换成围绕从$\ii m$到$\ii \infty$的割线，并作变量代换$p = \ii \rho$，可将上式化为
\[
    D(x-y) = \frac{1}{4\pi^2 r} \int_{m}^\infty \dd{\rho} \frac{\rho \ee^{-\rho r}}{\sqrt{\rho^2 - m^2}} \stackrel{r \to \infty}{\sim} \ee^{- m r}.
\]
这就是说，即使是彼此之间有类空间隔的两点之间实际上也是有关联的，虽然随着举例增加关联函数快速下降；或者说，在光锥之外，跃迁振幅会指数下降但是不会一开始就降到零。

这实际上并没有直接破坏因果律，因为量子态并不是直接可观测的，真正有意义的是测量，如果具有类空间隔的两点之间的同种可观测量是对易的，因果律还是能够保持。
计算$\phi(x)$和$\phi(y)$的对易子：
\begin{equation}
    \begin{aligned}
        \comm*{\phi(x)}{\phi(y)} &= \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{2 \omega_{\vb*{p}}} (\ee^{\ii p \cdot (y - x)} - \ee^{\ii p \cdot (x - y)}) \\
        &= D(x-y) - D(y-x),
    \end{aligned}
\end{equation}
在$x$和$y$之间为类空间隔时，洛伦兹变换可以让$x-y$变成$y-x$，由于$D(x-y)$和$D(y-x)$各自是洛伦兹标量，$\comm*{\phi(x)}{\phi(y)}$就是零。
否则，洛伦兹变换不能让$x-y$变成$y-x$，因为此时时间的先后顺序是绝对的，从而$\phi(x)$和$\phi(y)$不对易。
因此因果律在这里确实是能够保持的。

我们看到$\phi(x)$和$\phi(y)$的对易子实际上就是一个普通的数，即

在实际计算中通常计算编时格林函数，因为其携带了足够多的信息，并且在自由场情况下有Wick定理。
仿照前述引入$\omega$积分的方法，可以验证我们有
\begin{equation}
    D_F(x-y) = \mel*{0}{T \phi(x) \phi(y)}{0} = \int \frac{\dd[4]{p}}{(2\pi)^4} \frac{\ii}{p^2 - m^2 + \ii 0^+} \ee^{- \ii p \cdot (x - y)}.
\end{equation}
这称为\concept{费曼传播子}，可以看到它在动量空间中的形式是非常简单的。

\subsection{实标量场的路径积分量子化}

旋量场的路径积分需要额外提几句，因为此时所谓的“经典场”实际上是一些彼此反对易的算符（所谓\concept{格拉斯曼数}），而不是正常的数。
格拉斯曼数的积分基本上只用在写出配分函数上，

\[
    S = \int \dd[4]{x} \bar{\psi} (\ii G^{-1}) \psi
\]

\subsection{非相对论极限}

\subsubsection{克莱因-高登方程的退化形式}\label{sec:sch-eq-from-kg}

我们将讨论克莱因-高登方程的退化形式。旋量场和标量场由于也服从克莱因-高登方程，没有必要单独考虑——它们多出来的自由度可以使用其它方式，如自旋等，引入。
实际上我们讨论的应该是复的克莱因-高登方程，因为旋量场是复的，但本节的讨论并不会用到场是不是复的这个信息。

首先我们注意到一个事实：时谐波
\begin{equation}
    \phi = \ee^{- \ii m t}
    \label{eq:lowest-energy}
\end{equation}
是\eqref{eq:klein-gordon-eq}的解，并且它的能量最低，就是零。（代入哈氏量可得）因此，能量不高的场只是微微偏离\eqref{eq:lowest-energy}，我们设其为
\begin{equation}
    \phi(\vb*{x}, t) = \psi(\vb*{x}, t) \ee^{- \ii m t},
    \label{eq:low-energy-ansatz}
\end{equation}
则
\[
    (\partial_\mu \partial^\mu + m^2) \phi = \ee^{- \ii m t} (-2 \ii m \partial_t \psi + \partial_t^2 \psi - \laplacian{\psi}).
\]
由于$\phi$只是略微偏离\eqref{eq:lowest-energy}%
\footnote{需要注意的是这个说法字面上实际上是不严谨的。${\phi}$是一个算符，它包含了所有可能的$\phi$的取值，不应该“只是略微偏离\eqref{eq:lowest-energy}”。
然而，${\phi}$的本征态中非常偏离\eqref{eq:lowest-energy}的那部分模式在我们的低能有效理论中并不会被涉及到。
换而言之，我们关心的那部分$\ket{\phi}$只是略微偏离\eqref{eq:lowest-energy}，因此认为${\phi}$只是略微偏离\eqref{eq:lowest-energy}并不会显著改变我们的理论的行为。
}%
，可以预期$\psi$的时间部分振荡不会特别明显，于是取近似
\[
    \partial_t^2 \psi \ll m \partial_t \psi,
\]
就得到
\begin{equation}
    \ii \partial_t \psi + \frac{1}{2m} \laplacian{\psi} = 0.
    \label{eq:schodinger-eq}
\end{equation}
\eqref{eq:schodinger-eq}称为\concept{薛定谔场}的运动方程。容易看出它不是洛伦兹协变的，这是理所当然的，因为它描述的现象发生在低能近似下，此时伽利略对称性就足够了。
薛定谔场是复的，无论$\phi$是不是复场，因为拟设\eqref{eq:low-energy-ansatz}引入了一个复数因子。

方程\eqref{eq:schodinger-eq}是以下拉氏量%
\footnote{$\grad{\psi}^\dagger \cdot \grad{\psi}$代表将两个梯度算符做缩并，行向量$\psi^\dagger$和列向量$\psi$相乘，即$\partial_i \psi^\dagger \partial^i \psi$。混合使用不变量记号和矩阵记号是因为我们并不知道$\psi$的内部结构，只知道$\psi^\dagger \psi$是标量，因此把$\psi$当成一个整体，好像一个标量一样，来做计算。}
\begin{equation}
    \mathcal{L} = \frac{\ii}{2} \left( \psi^\dagger \dot{\psi} - \psi \dot{\psi}^\dagger \right) - \frac{1}{2m} \grad{\psi^\dagger} \cdot \grad{\psi}
    \label{eq:schodinger-lagrangian}
\end{equation}
的运动方程。把$\psi$和$\psi^\dagger$看成两个独立的场，分别应用欧拉-拉格朗日方程，就能够得到\eqref{eq:schodinger-eq}和其共轭转置。

容易看出，
\[
    \pi(\psi) = \pdv{\mathcal{L}}{\dot{\psi}} = \frac{\ii}{2} \psi^\dagger, \quad \pi(\psi^\dagger) = \pdv{\mathcal{L}}{\dot{\psi}^\dagger} = - \frac{\ii}{2} \psi^\top,
\]
从而可以计算出
\begin{equation}
    \mathcal{H} = \frac{1}{2m} \grad{\psi^\dagger} \cdot \grad{\psi}.
\end{equation}
这个哈氏量中出现了$\pi$的导数，处理起来会比较麻烦。为了规避这些麻烦，我们将不再讨论经典的哈密顿动力学，而直接开始做量子化。

电荷密度为
\begin{equation}
    \rho(\vb*{r}) = q \psi^\dagger(\vb*{r}) \psi(\vb*{r}),
\end{equation}
而且电流密度为
\begin{equation}
    \vb*{j}(\vb*{r}) = \frac{1}{2m\ii} (\psi^\dagger(\vb*{r}) \grad{\psi}(\vb*{r}) - \psi(\vb*{r}) \grad{\psi}^\dagger(\vb*{r}))
\end{equation}

\subsubsection{薛定谔场}

% TODO:可以看到，$j=0$的标量场给出的粒子的自旋角动量为0，$j=\pm \frac{1}{2}$的旋量场给出的粒子的自旋角动量为$\pm 1/2$，$j=1$的矢量场给出的粒子的自旋角动量为$\pm 1$。这并不让人意外，因为$j$决定了粒子的内禀自由度的维度($2j+1$)。无质量的情况比较特殊
实际上也可以通过量子化薛定谔场来得到非相对论性量子场论。薛定谔场实际上是标量场、旋量场、矢量场退化而来的场，因此它也有内禀自由度。使用自旋（或者螺旋度）标记这些内禀自由度。
由于薛定谔场不是实场，考虑对易关系
\[
    \comm*{{\psi}^i(\vb*{x}, t)}{{\pi}_j(\vb*{y}, t)} = \ii \delta^i_j \delta^3 (\vb*{x} - \vb*{y}),
\]
即
\[
    \comm*{{\psi}^i(\vb*{x}, t)}{({\psi}^j)^\dagger (\vb*{y}, t)} = 2 \delta^3 (\vb*{x} - \vb*{y}),
\]
这表明

总之，在不涉及粒子相互作用时，单粒子量子力学足以覆盖薛定谔场的情况，即“非相对论量子场论”就是量子力学。%
\footnote{
    量子场论和量子力学的对应实际上有两方面：首先，量子场论和量子力学都可以写成哈密顿动力学的形式，当然前者各个物理量可以使用空间位置作为标签而后者物理量的标签都是离散的；其次，量子场论和量子力学都能够描述多粒子态。
    当我们说非相对论性量子场论就是量子力学时我们是在说后者，当我们说量子场论是3+1维量子力学时我们是在说前者。
}%
我们再一次看到场自由度和数量可变的粒子自由度实际上就是一回事。
初等量子力学中可以直接定义S算符、单粒子费曼图（“原子吸收一个光子、释放一个光子”，等等），你可能会问为什么这些本来用于场论的概念也可以被用在单粒子量子力学上，毕竟前者是3+1维理论而后者是0+1维理论。但实际上，这些用在量子场论上的概念完全可以被应用在薛定谔场上，而由于薛定谔场不涉及粒子数变化，这些概念就可以被套用在单粒子态量子力学上。

\subsubsection{关于归一化的注记}

在将相对论性的相互作用顶角移植到非相对论极限下时需要注意归一化问题。
在非相对论性极限下我们更喜欢使用$\{\ket{\vb*{p}}\}$表象，而不是$\{\ket{p}\}$表象。
我们知道
\[
    \ket{p} = \sqrt{2 \omega_{\vb*{p}}} \ket{\vb*{p}},
\]
在非相对论极限下就有
\begin{equation}
    \ket{\vb*{p}} = \frac{1}{\sqrt{2m}} \ket{p},
\end{equation}
于是应有
\begin{equation}
    \mel*{\vb*{p}_1, \ldots, \vb*{p}_m}{S}{\vb*{q}_1, \ldots, \vb*{q}_n} = \frac{1}{(2m)^{(m+n)/2}} \mel*{p_1, \ldots, p_m}{S}{q_1, \ldots, q_n}.
\end{equation}

\section{旋量场}

\subsection{旋量场的狄拉克方程}

旋量场实际上几乎从来不会在经典情况下遇到，因为它们的场值是复数，因此不具有直接的物理意义。

本节讨论旋量的运动方程。使用凑拉氏量的方法处理旋量会比较困难，因为旋量的指标分带点的和不带点的，因此会频繁地涉及求共轭等运算，在拉格朗日动力学中讨论这些问题并不方便。
因此接下来我们尝试直接构造旋量的运动方程，从这些运动方程反推对应的拉氏量。
我们将尝试构造一阶运动方程。如果对魏尔旋量和狄拉克旋量都能够构造出一阶运动方程，那就没有必要考虑更高阶的运动方程。
% TODO:为什么？

\subsubsection{魏尔旋量的运动方程} 

首先讨论魏尔旋量的运动方程。满足平移不变性的方程形如
\[
    \partial_0 \psi = b^i \partial_i \psi + C \psi,
\]
其中$b^i$和$C$是常数，$C$可以是一个旋量矩阵。
由于我们同时还要求旋转不变性，$C$只能是一个标量。显然，这个方程中所有含有导数的项加在一起必然得到一个旋量，即
\[
    \partial_0 \psi - b^i \partial_i \psi = \text{a covariant term} = C \psi.
\]
梯度算符是矢量，按照\eqref{eq:vector-is-spin-tensor}，我们可以写出作用在魏尔旋量上的导数算符
\begin{equation}
    \partial_{a \dot{b}} = \partial_\nu \sigma^\nu_{a \dot{b}}.
\end{equation}
从而魏尔旋量的梯度就是
\[
    \partial_{a \dot{b}} \psi^{\dot{b}} = \partial_\nu \sigma^\nu_{a \dot{b}} \psi^{\dot{b}}
\]
和
\[
    \partial^{\dot{a} b} \psi_b = \partial_\mu (\sigma^\mu)^{\dot{a} b} \psi_b.
\]
两个表达式中，$\sigma$的指标都一个带点一个不带点，这是为了保证梯度算符的协变性，因为矢量是一个左手旋量和一个右手旋量直积的结果。
$\partial_0 \psi - b^i \partial_i \psi$应该能够写成以上两种旋量梯度的函数。由于以上两种旋量梯度带一个指标，而$\partial_0 \psi - b^i \partial_i \psi$也是单指标对象，显然两者只应该差一个倍数。（当然，也可以将一个旋量张量参数和旋量梯度做缩并，但这样就没有旋转不变性了）这个倍数可以被吸收到$C$中。
从而运动方程形如
\[
    \mathrm{grad} \psi = C \psi.
\]
然而，注意到左手旋量的梯度是一个右手旋量，右手旋量的梯度是一个左手旋量，因此以上的方程会让一个右手旋量的各个分量等于一个左手旋量的各个分量，从而破坏了洛伦兹协变性。
消除这个矛盾的唯一可能就是让$C=0$，于是左手旋量的运动方程为
\[
    \partial_\mu (\sigma^\mu)^{\dot{a} b} \psi_b = 0,
\]
右手旋量的运动方程为
\[
    \partial_\nu \sigma^\nu_{a \dot{b}} \psi^{\dot{b}} = 0.
\]
由定义，$(\sigma^\mu)_{a \dot{b}}$的分量矩阵就是$\sigma$矩阵，而$(\sigma^\mu)^{\dot{a} b}$的分量矩阵则需要通过指标升降关系
\[
    (\sigma^\mu)^{\dot{a} b} = (\epsilon^{ac} (\sigma^\mu)_{c \dot{d}} \epsilon^{\dot{b} \dot{d}})^*
\]
得到。定义$(\sigma^\mu)^{\dot{a} b}$的分量矩阵为$\bar{\sigma}^\mu$，通过计算可以发现
\begin{equation}
    \bar{\sigma}^0 = \sigma^0 = I, \quad \bar{\sigma}^i = - \sigma^i,
\end{equation}
于是可以使用矩阵形式写出运动方程：
\begin{equation}
    \partial_0 \psi \pm \sigma^i \partial_i \psi = 0 .
    \label{eq:weyl-eq}
\end{equation}
负号为左手旋量，正号为右手旋量。从\eqref{eq:weyl-eq}立刻可以得到
\[
    \partial_\mu \partial^\mu \psi = 0,
\]
无论是右手旋量还是左手旋量。因此，单独一个旋量场一定是没有质量的。

然而，拉氏量中的质量项实际上是自由理论的一部分，因此一种非常简单的让旋量场获得质量而与此同时理论保持为自由理论的方法是让一对旋量耦合起来。
两个旋量场的耦合意味着拉氏量中要出现一个二次项，它由两个旋量的乘积构成，而由于这个二次项必须是标量，它应该包含一个左手旋量和一个右手旋量。
考虑到我们可以把一个左手旋量和一个右手旋量打包成一个狄拉克旋量，有必要分析狄拉克旋量的运动方程。
% TODO: majorana费米子

\subsubsection{狄拉克旋量的运动方程} 

\paragraph{魏尔表象} 我们现在让狄拉克旋量中的两个旋量之间有线性的相互作用（从而，关于狄拉克旋量的方程仍然是线性的）。
我们将狄拉克旋量写成一个左手旋量和一个右手旋量拼合的形式，称为\concept{魏尔表象}或\concept{手性基}，虽然实际上有其它方式可以表示狄拉克旋量。
洛伦兹不变性的要求意味着，唯一可能的方程形式如下：
\begin{equation}
    \begin{aligned}
        (\partial_0 + \sigma^i \partial_i) \psi_R = - \ii m_1 \psi_L, \\
        (\partial_0 - \sigma^i \partial_i) \psi_L = - \ii m_2 \psi_R.
    \end{aligned}
    \label{eq:interacting-weyl-eq}
\end{equation}
其中我们为了节省符号，使用$\psi_L$和$\psi_R$分别代表狄拉克旋量$\psi$的左手部分和右手部分。
当然，$m=0$时就狄拉克旋量的运动方程就退化为了一对完全无关的左手旋量和右手旋量。
这也就是实际计算时没有必要单独讨论魏尔旋量的原因。
在\eqref{eq:interacting-weyl-eq}中各个方程的两边作用适当的算符来让两个场解耦，就得到
\[
    \partial_\mu \partial^\mu \psi_L = - m_1 m_2 \psi_L, \quad \partial_\mu \partial^\mu \psi_R = - m_1 m_2 \psi_R,
\]
也就是说狄拉克旋量也满足克莱因-高登方程，只需要我们令$m^2=m_1 m_2$。从而为了得到物理解，我们要求$m \geq 0$。
可以看到$m_1$和$m_2$的具体取值实际上是无关紧要的，重要的是它们的乘积，因此以下让它们都取$m$。

为了将\eqref{eq:interacting-weyl-eq}写成更加紧凑的形式，引入$\gamma$矩阵%
\footnote{这里给出的$\gamma$矩阵的形式实际上只是一种可能性。我们称这种将狄拉克旋量的左手部分和右手部分分开处理（或者等价地说，狄拉克旋量的基或者只含有左手旋量，或者只含有右手旋量），并且按照\eqref{eq:gamma-matrix}引入$\gamma$矩阵的方式为\concept{魏尔表象}。也可以取其它的旋量基，从而获得其它表象。}
\begin{equation}
    \gamma^\mu = \pmqty{0 & \sigma^\mu \\ \bar{\sigma}^\mu & 0}, \quad \gamma^5 = \pmqty{-I & 0 \\ 0 & I},
    \label{eq:gamma-matrix}
\end{equation}
从而
\begin{equation}
    \gamma_\mu = \eta_{\mu \nu} \gamma^\nu = \pmqty{ 0 & \bar{\sigma}^\mu \\ \sigma^\mu & 0 },
\end{equation}
则得到
\begin{equation}
    (\ii \gamma^\mu \partial_\mu - m) \psi = 0.
    \label{eq:dirac-eq}
\end{equation}
这就是\concept{狄拉克方程}。如前所述，它能够推导出克莱因-高登方程，并且在$m$取零时退化为一个左手旋量场和一个右手旋量场的简单组合。

现在我们尝试拼凑一个拉氏量出来。由于狄拉克场的运动方程是一阶的而它又是一个复场，需要通过$\psi$的复共轭拼凑出一个在运动方程意义下“独立”的场，然后构造一个同时包含$\psi$及其复共轭的拉氏量，由这个拉氏量给出关于$\psi$和它的复共轭的两个方程，并且这两个方程必须等价。
现在我们尝试寻找和\eqref{eq:dirac-eq}等价，但是仅仅包含其复共轭的方程。
由\eqref{eq:dirac-eq}取共轭转置%
\footnote{这里的共轭转置是指场的共轭转置，不需要对作用在场上的算符$\partial_\mu$取共轭转置。}
，得到
\[
    (-\ii) \partial_\mu \psi^\dagger (\gamma^\mu)^\dagger - m \gamma^\dagger = 0.
\]
容易验证$\gamma$矩阵具有下面的性质：
\[
    (\gamma^0)^\dagger = \gamma^0, \quad (\gamma^i)^\dagger = - \gamma^i, 
\]
以及
\[
    \gamma^i \gamma^0 = - \gamma^0 \gamma^i,
\]
我们发现
\[
    \ii \partial_0 \psi^\dagger \gamma^0 \gamma^0 + \ii \partial_i \psi^\dagger \gamma^0 \gamma^i + m \psi^\dagger \gamma^0 = 0.
\]
定义
\begin{equation}
    \bar{\psi} = \psi^\dagger \gamma^0,
\end{equation}
则其运动方程为
\begin{equation}
    \ii \partial_\mu \bar{\psi} \gamma^\mu + m \bar{\psi} = 0.
    \label{eq:cog-dirac-eq}
\end{equation}
这正是我们需要的另一个运动方程。
我们会发现，拉氏量
\begin{equation}
    \mathcal{L} = \bar{\psi} (\ii \gamma^\mu \partial_\mu - m) \psi
    \label{eq:dirac-lagrangian}
\end{equation}
分别对$\psi$和$\bar{\psi}$应用欧拉-拉格朗日方程，就得到\eqref{eq:dirac-eq}和\eqref{eq:cog-dirac-eq}。同时容易验证这是一个洛伦兹标量。这表明\eqref{eq:dirac-lagrangian}确实就是狄拉克场的拉氏量。
我们之后还会非常频繁地写$\gamma^\mu a_\mu$这样的量，可以将其简记为$\slashed{a}$。

从\eqref{eq:dirac-lagrangian}可以推导出对应的哈氏量。计算共轭动量可以得到
\begin{equation}
    \pi = \ii \bar{\psi} \gamma^0 = \ii \psi^\dagger,
\end{equation}
从而能够得到哈氏量密度
\begin{equation}
    \mathcal{H} = - \ii \bar{\psi} \gamma^i \partial_i \psi  + m \bar{\psi} \psi = - \pi \gamma^0 \gamma^i \partial_i \psi - \ii m \pi \gamma^0 \psi.
    \label{eq:dirac-hamiltonian}
\end{equation}

有时我们需要让一个狄拉克旋量中的左手部分或是右手部分单独拿出来与其它场耦合。
容易看出，矩阵
\begin{equation}
    P_L = \frac{1 - \gamma^5}{2}, \quad P_R = \frac{1 + \gamma^5}{2}
\end{equation}
分别是左手旋量和右手旋量的投影算符。

\paragraph{狄拉克表象} 以上我们都设$\psi$的各分量由一个左手旋量和一个右手旋量拼凑而成。这称为\concept{手性基}或者\concept{魏尔表象}。%
\footnote{
    虽然我们在讨论场算符，但是这些场算符可以直接激发出单粒子态，后者和前者之间的关系是线性的，所以“基底”或“表象”的术语确实是正确的：它们的确给出了单费米子的一组基底。
}%
在手性基当中，拉氏量的质量项为
\[
    - \bar{\psi} m \psi = - m (\chi_L^\dagger \xi_R + \xi_R^\dagger \chi_L),
\]
这不是一个对角化的二次型。若做分量变换
\begin{equation}
    \psi' = \frac{1}{\sqrt{2}} \underbrace{\pmqty{1 & 1 \\ -1 & 1}}_{U} \psi, \quad \gamma'^\mu = U \gamma^\mu U^\dagger,
\end{equation}
质量项就被对角化了。我们称这种分量选取为\concept{质量基}或者\concept{狄拉克表象}。
在后面做量子化时会看到，在魏尔表象中，$\psi$的$p^0 > 0$的解包含权重相等的一个左手旋量分量和一个右手旋量分量，$p^0 < 0$的解包含权重正好差一个负号的一个左手旋量分量和一个右手旋量分量，因此狄拉克表象下，$\psi$的前两个分量代表$p^0 > 0$的模式而后两个分量代表$p^0 < 0$的模式。
实际上，这就意味着狄拉克表象的前两个分量代表自旋一上一下的两种粒子，而后两个分量分别代表自旋一上一下的两种反粒子。

容易计算出质量基下
\begin{equation}
    \gamma^0 = \pmqty{I & 0 \\ 0 & -I}, \quad \gamma^i = \pmqty{0 & \sigma^i \\ - \sigma^i & 0 }, \quad \gamma^5 = \pmqty{0 & I \\ I & 0}.
\end{equation}
在质量基下，左手投影算符和右手投影算符分别是

\subsubsection{$\gamma$矩阵和Clifford代数}

\paragraph{$\gamma$矩阵的乘法规则}

\paragraph{$\gamma$矩阵的洛伦兹变换} %TODO：旋量场的洛伦兹标量

$\gamma$矩阵的洛伦兹变换需要一些特别的注记。如果我们做像本文定义的那样的洛伦兹变换，即让旋量场变换，那么$\gamma$矩阵在洛伦兹变换下根本就不应该发生变化。
但是，另一方面，$\bar{\psi} \gamma^\mu \psi$可以验证的确是矢量。
这种看似冲突的情况——$\gamma$矩阵同时看起来像标量和矢量——当然来自它们代表的是可以作用在单粒子态上的算符，或者作用在场算符上的“元算符”，而非场算符本身这一事实。
回顾引入狄拉克旋量的过程，$\gamma$矩阵的作用其实是“正确地将左手部分的魏尔旋量和右手部分的魏尔旋量混合起来”，它实际上提供了拉氏量关于旋量场的形式，自然在洛伦兹变换下可以没有变化。

这样在实际计算中我们其实可以在很多时候将旋量有关的量——旋量场和$\gamma$矩阵——当成没有内部结构的对象，即假装系统中只有标量和矢量，而通过正确地排列旋量场和$\gamma$矩阵的顺序来完成本应通过旋量指标完成的工作。
对矢量当然也可以这么做，实际上研究数值计算时我们将一切都写成矩阵就是在做这件事；在量子场论中不这么做的主要原因是，在量子场论中我们需要频繁讨论矢量的任意张量积，从而保留上下指标会让计算变得直观，而对旋量做的操作则相当有限。

\paragraph{$\gamma$矩阵的物理意义} 我们已经看到$(1-\gamma^5)/2$和$(1+\gamma^5)/2$分别是左手和右手的手征投影算符。
还可以验证，
\begin{equation}
    \gamma^5 P_L \psi = - P_L \psi, \quad \gamma^5 P_R \psi = P_R \psi,
\end{equation}
因此$\gamma^5$是\concept{手征算符}，其负本征值对应左旋态而正本征值对应右旋态。
另一方面，$\gamma^0$则交换一个狄拉克旋量的左手和右手部分。

\subsection{旋量场的正则量子化}

\subsubsection{平面波模式}

我们还是例行公事地观察狄拉克方程的平面波解，并将其中的场变量用算符代替。接下来将使用手性基。
平面波旋量场的分量应该包括这些标记：首先是动量。三维动量给定之后，对时谐场有$p^0 = \pm \omega_{\vb*{p}}$，但由于旋量场不是实场，因此其正频率部分和负频率部分之间没有简单的关系，即不能统一用$a$和$a^\dagger$表示而需要引入两种模式。
在动量给定后，只需要求解
\[
    (\gamma^\mu p_\mu - m) \psi = 0.
\]
洛伦兹变换不会改变这个方程的解的结构，所以为了弄清楚方程的解大致是什么样的我们可以先求解
\[
    (\gamma^0 p_0 - m) \psi = 0.
\]
我们会发现$p^0 = \pm \omega_{\vb*{p}}$各自对应两个独立的解，分别是
\[
    \pmqty{1 \\ 0 \\ 1 \\ 0}, \quad \pmqty{0 \\ 1 \\ 0 \\ 1}, \quad \pmqty{1 \\ 0 \\ -1 \\ 0}, \quad \pmqty{0 \\ 1 \\ 0 \\ -1}.
\]
容易验证自旋算符和哈密顿量对易，且魏尔旋量的两个分量正好就代表两种不同的自旋。
因此，标记平面波旋量场的分量的独立标签包括：三维动量，频率的正负，以及自旋$1/2$。
这样，我们设
\begin{equation}
    \psi(x) = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{\sqrt{2 \omega_{\vb*{p}}}} (a_{\vb*{p}, s} u^s(p) \ee^{-\ii p \cdot x} + b_{\vb*{p}, s} v^s(p) \ee^{\ii p \cdot x}),
\end{equation}
其中$s = \pm 1/2$，$u^s$和$v^s$分别满足（这里$p_i$仍然和$p^i$差一个负号，以和闵可夫斯基时空度规一致）
\begin{equation}
    (\gamma^0 \omega_{\vb*{p}} + \gamma^i p_i) u_s(p) = m u_s(p), \quad (- \gamma^0 \omega_{\vb*{p}} + \gamma^i p_i) v_s(p) = m v_s(p), 
    \label{eq:u-v-eigen}
\end{equation}
并且被归一化为
\begin{equation}
    (u^r(p))^\dagger u^s(p) = 2 \omega_{\vb*{p}} \delta^{rs}, \quad (v^r(p))^\dagger v^s(p) = 2 \omega_{\vb*{p}} \delta^{rs}, \quad (u^r(p))^\dagger v^s(p) = 0.
    \label{eq:dirac-norm}
\end{equation}
这里$2\omega_{\vb*{p}}$因子是为了和后面的正则量子化中的动量积分中的$1/2\omega_{\vb*{p}}$因子抵消，从而保证正确的归一化，让动量产生湮灭算符的对易子为$\delta^3(\vb*{p} - \vb*{p})$的同时，$\psi$和$\ii \psi^\dagger$的对易子为$\ii \delta(\vb*{x} - \vb*{y})$。

代入哈密顿量，可以得到（我们会发现哈密顿量\eqref{eq:dirac-hamiltonian}中的第一项和\eqref{eq:u-v-eigen}左边的第二项抵消了）
\[
    H = \sum_{s} \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \omega_{\vb*{p}} (a^\dagger_{\vb*{p}, s} a_{\vb*{p}, s} - b^\dagger_{\vb*{p}, s} b_{\vb*{p}, s}).
\]

看起来我们有麻烦了——$b$模式上的粒子产生得越多，能量越低，似乎出现了能量的无限下降。
然而，如果对$\psi$场施加反对易关系，就会得到
\[
    H = \sum_{s} \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \omega_{\vb*{p}} (a^\dagger_{\vb*{p}, s} a_{\vb*{p}, s} + b_{\vb*{p}, s} b^\dagger_{\vb*{p}, s} - 1),
\]
在略去发散但是是常数的真空零点能之后就得到
\begin{equation}
    H = \sum_{s} \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \omega_{\vb*{p}} (a^\dagger_{\vb*{p}, s} a_{\vb*{p}, s} + b_{\vb*{p}, s} b^\dagger_{\vb*{p}, s} ).
\end{equation}
现在如果我们将$b$看成某种粒子的\emph{产生}算符，而将$b^\dagger$看成\emph{湮灭}算符，那么我们就完成了量子化——哈密顿量变成了占据数的一次函数，并且有正确的反对易关系。
另一方面，如果施加对易关系，虽然也可以得到不会无限下降的哈密顿量，但是不能将$b$看成某种粒子的\emph{产生}算符，而将$b^\dagger$看成\emph{湮灭}算符，因为设$\tilde{b} = b^\dagger$，就有$\comm*{\tilde{b}}{\tilde{b}^\dagger} = -1$，而不是我们需要的$+1$。

于是，我们交换$b$和$b^\dagger$的位置，而要求
\begin{equation}
    \psi(x) = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{\sqrt{2 \omega_{\vb*{p}}}} (a_{\vb*{p}, s} u^s(p) \ee^{-\ii p \cdot x} + b^\dagger_{\vb*{p}, s} v^s(p) \ee^{\ii p \cdot x}),
\end{equation}
并施加反对易关系
\begin{equation}
    \acomm*{\psi_a(\vb*{x})}{\psi^\dagger_b(\vb*{y})} = \delta^3(\vb*{x} - \vb*{y}) \delta_{ab},
\end{equation}
则哈密顿量就是
\begin{equation}
    H = \sum_{s} \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \omega_{\vb*{p}} (a^\dagger_{\vb*{p}, s} a_{\vb*{p}, s} + b^\dagger_{\vb*{p}, s} b_{\vb*{p}, s} ).
\end{equation}

$b$模式和$a$模式互为反粒子。通过将$\psi$场的傅里叶展开中的积分变量换成$-\vb*{p}$（不改变积分值），可以发现
% 有误：只是对应，还需要加上$u$和$v$矩阵的切换
\[
    a^\dagger_{\vb*{p}} \ee^{- \ii \omega_{\vb*{p}} t} = b_{-\vb*{p}} \ee^{\ii \omega_{\vb*{p}} t},
\]
即它们的确互为反粒子。我们通常以$b^\dagger$为反粒子，虽然这只是习惯问题。
在绘制含有反粒子的费曼图时应当令传播子上的箭头和与传播子平行的动量箭头方向相反，这样顶角的形式无需因为传入的是粒子还是反粒子而改变（例如，$\gamma^\mu A_\mu \bar{\psi} \psi$的形式在这种情况下永远是“一条玻色子线连接一条方向指向顶角的费米子线和一条方向远离顶角的费米子线”），而又提醒了我们一个传播子是反粒子，同时顶角的动量守恒关系也非常直观。
这可以直观地展示为
\[
    \begin{tikzpicture}
        \begin{feynhand}
            \vertex (a) at (0,0); \vertex (b) at (2,0);
            \propag[fer, mom={$-k$}] (a) to (b);
        \end{feynhand}
    \end{tikzpicture} a(-k) = 
    \begin{tikzpicture}
        \begin{feynhand}
            \vertex (a) at (0,0); \vertex (b) at (2,0);
            \propag[fer, revmom={$k$}] (a) to (b);
        \end{feynhand}
    \end{tikzpicture} =
    b^\dagger(k) \begin{tikzpicture}
        \begin{feynhand}
            \vertex (a) at (0,0); \vertex (b) at (2,0);
            \propag[anti fermion, mom={$-k$}] (a) to (b);
        \end{feynhand}
    \end{tikzpicture} .
\]

总之，对旋量场，由于负能量部分（即反粒子）的存在，对易关系是不适用的，因此必须选择反对易关系，这意味着旋量场一定是费米场。

\subsubsection{旋量场的偏振}

现在我们只是形式地写出了$u$和$v$，但是并没有真的计算出它们具体是多少。
计算它们具体是多少是很重要的，因为显然易见，计算偏振方向任意的散射振幅时要用到它们。

首先，对$\vb*{p}=0$的情况，有
\begin{equation}
    u(p) = \sqrt{m} \pmqty{\xi \\ \xi}, \quad \xi^\dagger \xi = 1,
\end{equation}
这样和归一化条件\eqref{eq:dirac-norm}一致。

不失一般性地，认为$\vb*{p}$指向$z$轴。我们的策略是这样的：首先写出动量和推动参数$\eta$之间的关系%
\footnote{
    这里有一个可能的问题，虽然我们确定与能量匹配、共同组成四维动量的那个$\vb*{p}$和标记了自由旋量场的稳定模式的那个$\vb*{p}$都是空间平移的生成元，万一它们没有被一起“定标”怎么办？比如说，如果正好差一个常数怎么办？自旋就有这样的情况。
    好在我们已经证明，对后者也有$E^2 = \abs*{\vb*{p}}^2 + m^2$，因此这两个$\vb*{p}$的的确确是同一个东西。
}%
，然后将$\eta$代入旋量场的洛伦兹变换计算出动量为$\vb*{p}$的模式。

设我们做了一个洛伦兹变换，空间动量方向指向$z$轴，即有
\[
    \pmqty{E \\ p^3} = \exp(\eta \pmqty{0 & 1 \\ 1 & 0}) \pmqty{m \\ 0} = \pmqty{m \cosh \eta \\ m \sinh \eta},
\]
另一方面，在$p=(E, 0, 0, p^3)$时
% TODO:以及统一记号

\begin{equation}
    u(p) = \pmqty{ \sqrt{p \cdot \sigma} \xi \\ \sqrt{p \cdot \bar{\sigma}} \xi },
\end{equation}
类似地可以得到
\begin{equation}
    v(p) = \pmqty{ \sqrt{p \cdot \sigma} \xi \\ - \sqrt{p \cdot \bar{\sigma}} \xi }.
\end{equation}

\begin{equation}
    \bar{u}^r(p) u^s(p) = 2 m \delta^{rs}, \quad u^{r \dagger}(p) u^s(p) = 2 \omega_{\vb*{p}} \delta^{rs},
\end{equation}
\begin{equation}
    \bar{v}^r(p) v^s(p) = - 2 m \delta^{rs}, \quad v^{r \dagger}(p) v^s(p) = 2 \omega_{\vb*{p}} \delta^{rs}.
\end{equation}

\begin{equation}
    \sum_s u^s(p) \bar{u}^s(p) = \slashed{p} + m, \quad \sum_s v^s(p) \bar{v}^s(p) = \slashed{p} - m.
\end{equation}

后面我们将会用$\xi$表示$(\xi^1, \xi^2)$，从而$\xi^\dagger \xi = \sigma^0$。

\concept{Gordon恒等式}

\begin{equation}
    \bar{u}(q_2) (q_1^\mu )
\end{equation}

\subsubsection{守恒量和洛伦兹不变量}

\begin{equation}
    \sigma^{\mu \nu} = \frac{\ii}{2} \comm*{\gamma^\mu}{\gamma^\nu}
\end{equation}

\subsubsection{旋量场的传播子}

现在计算旋量场的各种传播子。旋量场的传播子定义需要特别注意，因为一个$\psi$中含有一种粒子和一种反粒子。
所幸，一个只含有空间定域的正费米子的态还是可以通过$\psi^\dagger \ket{0}$创建，因为反费米子的湮灭算符作用在真空态上给出零，没有任何贡献。
看起来，用$\mel*{0}{\psi \psi^\dagger}{0}$做正费米子的传播子而用$\mel*{0}{\psi^\dagger \psi}{0}$做反费米子的传播子应该是正确的。
然而，可以发现，这样的传播子不是洛伦兹协变的。能够从相对论性量子场论的路径积分计算出来的关联函数肯定是洛伦兹协变的，既然$\mel*{0}{T \psi \psi^\dagger}{0}$不是洛伦兹协变，那么可能并不能很容易地计算它，可能Wick定理都不一定成立，等等。
因此我们应该计算和$\mel*{0}{T \psi \psi^\dagger}{0}$只差一个可逆矩阵变换但是是洛伦兹协变的$\mel*{0}{T \psi \bar{\psi}}{0}$。%
\footnote{
    没有什么规定了传播子一定要定义成$\mel*{0}{\psi \psi^\dagger}{0}$的形式；计算传播子的目的是获得一种简便易行的方式，可用于从一个拉氏量中提取时间演化算符在多粒子态（可以使用场的连乘构造）下的矩阵元，因此传播子只需要大体上长成$\mel*{0}{\psi \psi^\dagger}{0}$的形式即可，差一个线性变换是完全可以的，只要所有重要的信息都能够恢复出来。
}%

\subsubsection{旋量场的路径积分量子化}

其实用路径积分算这个更快
\begin{equation}
    D_F(x-y) = \mel{0}{T \psi(x) \bar{\psi}(y)}{0} = \int \frac{\dd[4]{p}}{(2\pi)^4} \frac{\ii (\slashed{p} + m)}{p^2 - m^2 + \ii 0^+} \ee^{- \ii p \cdot (x- y)}.
\end{equation}

% TODO：费曼图
费米子的费曼规则比较难写。但是在规范场论中其实很好写，因为一张图中不存在涉及一个以上费米子的顶角，即每个顶角中都只有一个费米子进去，一个费米子出来，矩阵$\gamma^\mu$，$u$和$v$（列矢量按照$s$指标排成矩阵）只需要按照这个费米子的“世界线”依次累乘即可。

\subsection{非相对论极限}

在非相对论极限下旋量场当然也会退化成薛定谔场。

\section{矢量场}


\subsection{矢量场的麦克斯韦方程和布洛卡方程}

\subsubsection{对称性分析}

% TODO：$(\partial_\mu A^\mu)^2$
由于自由场导数阶数的限制，出现在拉氏量中的只能是$A^\mu$和$\partial^\nu A^\mu$构成的一次或二次不变量。当然，实际上也可以出现$\partial_\mu A^\nu$或者$\partial_\mu A_\mu$这种，但因为它们都可以使用$\partial^\nu A^\mu$表示出来，故没有必要考虑它们。
只含有$A^\mu$二次不变量为$A^\mu A_\mu$，没有一次不变量；只含有$\partial^\mu A^\nu$的一次不变量是它自我缩并得到的$\partial^\mu A_\mu$，二次的不变量是两个$\partial^\mu A^\nu$缩并得到的$\partial^\mu A^\nu \partial_\mu A_\nu$和$\partial^\mu A^\nu \partial_\nu A_\mu$。
由于参数都是标量，$\partial^\mu A^\nu$不能和参数缩并，也不能和$A^\mu$缩并（$C^\nu A^\mu \partial_\nu A_\mu$要求参数是矢量，$A^\mu A^\nu \partial_\mu A_\nu$是三次项），因此我们得到了所有可能的不变量。
从而拉氏量形如
\[
    \mathcal{L} = C_1 A^\mu A_\mu + C_2 \partial^\mu A_\mu + C_3 \partial^\mu A^\nu \partial_\mu A_\nu + C_4 \partial^\mu A^\nu \partial_\nu A_\mu.
\]
代入欧拉-拉格朗日方程可以看出，$C_2$项在运动方程中不会引入任何项，故略去。
于是
\[
    \mathcal{L} = C_1 A^\mu A_\mu + C_3 \partial^\mu A^\nu \partial_\mu A_\nu + C_4 \partial^\mu A^\nu \partial_\nu A_\mu.
\]
代入欧拉-拉格朗日方程，得到
\begin{equation}
    \partial_\mu (C_3 \partial^\mu A^\nu +  C_4 \partial^\nu A^\mu) = C_1 A^\nu.
    \label{eq:vector-motion-eq}
\end{equation}
我们首先考虑$C_3 = - C_4$时的特殊情况。重新定义各系数，使得
\begin{equation}
    \mathcal{L} = - \frac{1}{2} \partial^\mu A^\nu \partial_\mu A_\nu + \frac{1}{2} \partial^\mu A^\nu \partial_\nu A_\mu + \frac{m^2}{2} A_\mu A^\mu,
\end{equation}
对应的，
\begin{equation}
    \partial_\mu (\partial^\mu A^\nu - \partial^\nu A^\mu) + m^2 A^\nu = 0.
    \label{eq:proca-eq}
\end{equation}
常定义
\begin{equation}
    F^{\mu \nu} = \partial^\mu A^\nu - \partial^\nu A^\mu,
\end{equation}
于是就有
\begin{equation}
    \mathcal{L} = - \frac{1}{4} F_{\mu \nu} F^{\mu \nu} + \frac{1}{2} m^2 A_\mu A^\mu.
    \label{eq:proca-lagrangian}
\end{equation}
现在回到一般情况。我们指出这样一个结论：无论$C_3,C_4$取什么值，对应的场$A^\mu$都可以和$C_3 = - C_4$时的某个场${A'}^\mu$建立一一对应。
% TODO:证明
因此布洛卡方程\eqref{eq:proca-eq}就不失一般性地描写了所有的矢量场的运动方程。

\eqref{eq:proca-eq}在$m \neq 0$时可以推导出克莱因-高登方程。注意到
\[
    m^2 \partial_\nu A^\nu = \partial_\nu \partial_\mu \partial^\nu A^\mu - \partial_\mu \partial^\mu \partial_\nu A^\nu = 0,
\]
于是
\begin{equation}
    \partial_\mu A^\mu = 0.
    \label{eq:lorentz-gauge}
\end{equation}
回代入\eqref{eq:proca-eq}，发现其左边第二项为零，于是
\[
    \partial_\mu \partial^\mu A^\nu + m^2 A^\nu = 0.
\]
于是\eqref{eq:proca-eq}就约化成了\eqref{eq:lorentz-gauge}和四个克莱因-高登方程。
而当$m=0$时，运动方程在规范变换
\begin{equation}
    A^\mu \longrightarrow {A'}^\mu = A^\mu + \partial^\mu \varphi
\end{equation}
下不变。这意味着矢量场$A^\mu$的四个自由度实际上是多余的。%
\footnote{显然，只要选定了一个$\varphi$，同一个时间点上的$A^\mu$和${A'}^\mu$之间必定可以建立起一一对应关系。形象地说，不同$\varphi$对应的$A'$的运行轨迹相互平行，因此只需要其中一条轨迹就能够确定所有轨迹。选取特定的一条轨迹就是选取一个规范。
规范自由度——也就是决定“实际的轨道是哪一条”的自由度——是一个隐藏的额外自由度。
这里的情况和对称性自发破缺有点类似，在后者中，隐藏的自由度是序参量。不同的隐藏的额外自由度取值将系统的态空间分成了互不相交的分支。
可以认为规范自由度不是物理的自由度，也就是说它仅仅出现在拉氏量中，而规范自由度取值不同的状态在希尔伯特空间中应该被认为是同样的状态。
选取一个规范意味着先假定规范自由度取值不同的状态真的是不一样的，然后取状态空间中的一个分支。}%
换而言之，存在\emph{规范冗余性}。

\subsubsection{重矢量场的哈密顿量}

矢量场的共轭动量为
\[
    \pi_\mu = \partial_\mu A^0 - \partial^0 A_\mu,
\]
或者写成
\begin{equation}
    \pi^\mu = \partial^\mu A^0 - \partial^0 A^\mu.
\end{equation}
注意到$\pi^0 = 0$，因此可以只讨论其空间部分$\vb*{\pi}$。
在质量$m$不为零时场没有规范不变性，可以直接做计算得到
\begin{equation}
    A^0 = - \frac{1}{m^2} \div{\vb*{\pi}},
\end{equation}
以及
\begin{equation}
    \partial_0 A^0 = - \partial_i A^i = - \div{\vb*{A}},
\end{equation}
哈氏量为
\begin{equation}
    \mathcal{H} = \frac{1}{2} \vb*{\pi}^2 + \frac{1}{2m^2} (\div{\vb*{\pi}})^2 + \frac{1}{2} (\curl{\vb*{A}})^2 + \frac{1}{2} m^2 \vb*{A}^2.
\end{equation}
$m$出现在了分母中，这意味着无质量的场需要额外处理。

\subsubsection{麦克斯韦理论的经典规范选取}

现在来处理无质量的场。其运动方程为
\[
    \partial_\mu (\partial^\mu A^\nu - \partial^\nu A^\mu) = 0.
\]
无论$\partial_\mu A^\mu$是什么，总可以找到一个$\varphi$使得
\[
    \partial_\mu \partial^\mu \varphi = - \partial_\mu A^\mu,
\]
从而对应的有
\[
    \partial_\mu {A'}^\mu = 0.
\]
于是我们不失一般性地强行要求\eqref{eq:lorentz-gauge}对$m=0$时的矢量场成立。这称为选取了\concept{洛伦兹规范}。选取了洛伦兹规范意味着，实际的场自由度只有三个。知道了$A$的三个分量就可以计算出第四个。
当然，这不是唯一的规范选取方式。例如可以直接要求$A^0 = 0$，称为\concept{辐射规范}。
选取洛伦兹规范的好处在于，方程\eqref{eq:lorentz-gauge}是洛伦兹协变的，因此在做量子化时能够直接套用正则量子化关系而不必担心场方程不是洛伦兹协变而产生的修正。

我们施加洛伦兹规范。当然也可以选取别的规范，但这可能会破坏洛伦兹协变性，从而导致我们得到的哈密顿动力学实际上是带有约束的，从而给之后做量子化带来麻烦。
此时运动方程为
\begin{equation}
    \partial_\mu \partial^\mu A^\nu = 0.
    \label{eq:massless-vector-eq}
\end{equation}
拉氏量\eqref{eq:proca-lagrangian}直接导出的不是这个方程，于是我们使用另一个能够直接导出\eqref{eq:massless-vector-eq}的拉氏量
\begin{equation}
    \mathcal{L} = - \frac{1}{4} F_{\mu \nu} F^{\mu \nu} - \frac{1}{2} (\partial_\mu A^\mu)^2.
    \label{eq:maxwell-lagrangian-fixed}
\end{equation}
可以看到这个拉氏量多出了一项，这个实际上就是所谓的规范固定项。
在给定了洛伦兹规范的前提下，这个拉氏量实际上就和$m=0$的\eqref{eq:proca-lagrangian}是等价的。
此时
\begin{equation}
    \pi^0 = -\partial_\mu A^\mu, \quad \pi^i = \partial^i A^0 - \partial^0 A^i.
\end{equation}
当然，由洛伦兹规范，$\pi^0$就是零，不过我们完全可以算出哈密顿量之后再施加洛伦兹规范。
哈密顿量为 % TODO:这一部分似乎不需要太多笔墨，反正量子化的时候都是重新算的 关键之处在于哈密顿量和规范是有关的
\begin{equation}
    \mathcal{H} = 
\end{equation}

\subsection{无质量矢量场的正则量子化}

无质量矢量场的正则量子化涉及很多棘手的细节。

\subsubsection{横场量子化}

使用\eqref{eq:field-operator-fourier}展开一个无质量矢量场为
\begin{equation}
    A_\mu (\vb*{x}, t) = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{\sqrt{2 \omega_{\vb*{p}}}} \sum_{r=0}^3 \epsilon_\mu^r(\vb*{p}) \left({a}_{\vb*{p}, r}^\dagger \ee^{ - \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} + {a}_{\vb*{p}, r} \ee^{ \ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} \right), 
    \label{eq:expanding-massless-vector-field}
\end{equation}
由于没有质量，
\begin{equation}
    \omega_{\vb*{p}} = \abs{\vb*{p}}.
\end{equation}
$\epsilon^r$为一组闵可夫斯基时空的基矢量，称它们为\concept{偏振矢量}，也即，
\begin{equation}
    (\epsilon^r)_\mu (\epsilon^{r'})^\mu = \eta^{r r'}.
\end{equation}
为了确定偏振矢量，通常要求
\begin{equation}
    \epsilon^1 \cdot p = \epsilon^2 \cdot p = 0,
\end{equation}
并认为$\epsilon^0$是类时的，而$\epsilon^{1,2,3}$是类空的。这样，当$p^\mu \propto (1, 0, 0, 1)$，即$\vb*{p}$指向$z$轴时，我们有
\begin{equation}
    \epsilon^0 = \pmqty{1 \\ 0 \\ 0 \\ 0}, \quad \epsilon^1 = \pmqty{0 \\ 1 \\ 0 \\ 0}, \quad \epsilon^2 = \pmqty{0 \\ 0 \\ 1 \\ 0}, \quad \epsilon^3 = \pmqty{0 \\ 0 \\ 0 \\ 1}.
    \label{eq:z-axis-p-epsilon}
\end{equation}
% TODO:这是$\epsilon^\mu$还是$\epsilon_\mu$？？？
$p$取其它值时只需要对\eqref{eq:z-axis-p-epsilon}做洛伦兹变换即可，因为$\epsilon$的定义完全是洛伦兹协变的。

% TODO:为什么？这一片我都没有动手算过，
可以计算出
\begin{equation}
    \pi^\mu (\vb*{x}, t) = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \sqrt{\frac{\omega_{\vb*{p}}}{2}} \ii \sum_{r=0}^3 (\epsilon^r)^\mu (\vb*{p}) \left( {a}_{\vb*{p}, r} \ee^{\ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} - {a}_{\vb*{p}, r}^\dagger \ee^{ - \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} \right),
\end{equation}
施加正则对易关系，通过计算得到
% TODO：真的可以**等价**地得到下式吗？？
\begin{equation}
    \comm*{{a}_{\vb*{p}, \lambda}}{{a}^\dagger_{\vb*{p}', \lambda'}} = - \eta_{\lambda \lambda'} (2\pi)^3 \delta^3(\vb*{p} - \vb*{p}'), \quad \comm*{{a}^\dagger_{\vb*{p}, \lambda}}{{a}^\dagger_{\vb*{p}', \lambda'}} = \comm*{{a}_{\vb*{p}, \lambda}}{{a}_{\vb*{p}', \lambda'}} = 0.
\end{equation}
$\lambda=1, 2, 3$时对易关系是正确的，但是$\lambda=0$给出了一个不正常的对易关系
\[
    \comm*{{a}_{\vb*{p}, 0}}{{a}^\dagger_{\vb*{p}', 0}} = - (2\pi)^3 \delta^3 (\vb*{p} - \vb*{p}').
\]
例如，它产生的同样的单粒子态的内积将会是一个负数，这和我们对单粒子态的通常认识不符。
此外，哈密顿量成为
\begin{equation}
    {H} = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \omega_{\vb*{p}} \left( - {a}_{\vb*{p},0}^\dagger {a}_{\vb*{p}, 0} + \sum_{i=1}^3 {a}_{\vb*{p},i}^\dagger {a}_{\vb*{p}, i} \right),
\end{equation}
因此能量非正定。
显然这些问题都和${a}^\dagger_{\vb*{p},0}$有关，也就是说来自一个非物理的自由度。
会有非物理的自由度是显然的，因为我们在处理一个有规范不变性的场却从来没有选取过一个规范。
现在我们处理的是量子场，因此既可以直接对场做约束，也可以缩小态空间的范围。

我们先尝试直接将洛伦兹规范作用在场上，即要求对场算符有
\[
    \partial^\mu A_\mu = 0.
\]
然而，这是不可能的，
% TODO
经过检验，Gupia-Blenler量子化条件
\begin{equation}
    \partial^\mu {A}_\mu^{(+)} \ket{\psi} = 0
    \label{eq:gupia-blenlder}
\end{equation}
是一个可行的方案。
它实际上约束了态空间的范围。
代入\eqref{eq:expanding-massless-vector-field}，并注意到$\epsilon^1$与$\epsilon^2$和四维动量做内积得到零，我们发现
\begin{equation}
    ({a}_{\vb*{p}, 0} - {a}_{\vb*{p}, 3}) \ket{\psi} = 0.
\end{equation}
这意味着在无质量矢量场的态空间中哈密顿量实际上是
\begin{equation}
    {H} = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \omega_{\vb*{p}} ({a}_{\vb*{p},1}^\dagger {a}_{\vb*{p}, 1} + {a}_{\vb*{p},2}^\dagger {a}_{\vb*{p}, 2}).
\end{equation}
于是负能量问题也就解决了。哈密顿量中没有出现的量可以直接被略去，因为它们对系统的动力学不产生任何影响。
% TODO:严格说明
于是取
\begin{equation}
    A_\mu (\vb*{x}, t) = \int \frac{\dd[3]{\vb*{x}}}{(2\pi)^3} \frac{1}{\sqrt{2 \omega_{\vb*{p}}}} \sum_{r=1}^2 \epsilon_\mu^r(\vb*{p}) \left({a}_{\vb*{p}, r}^\dagger \ee^{ - \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} + {a}_{\vb*{p}, r} \ee^{ \ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} \right),
\end{equation}
以及
\begin{equation}
    \pi^\mu (\vb*{x}, t) = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \sqrt{\frac{\omega_{\vb*{p}}}{2}} \ii \sum_{r=1}^2 (\epsilon^r)^\mu (\vb*{p}) \left( {a}_{\vb*{p}, r} \ee^{\ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} - {a}_{\vb*{p}, r}^\dagger \ee^{ - \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} \right),
\end{equation}
重新计算对易关系得到
\begin{equation}
    \comm*{{a}_{\vb*{p}, \lambda}}{{a}^\dagger_{\vb*{p}', \lambda'}} = \delta_{\lambda \lambda'} (2\pi)^3 \delta^3(\vb*{p} - \vb*{p}'), \quad \comm*{{a}^\dagger_{\vb*{p}, \lambda}}{{a}^\dagger_{\vb*{p}', \lambda'}} = \comm*{{a}_{\vb*{p}, \lambda}}{{a}_{\vb*{p}', \lambda'}} = 0, \quad \lambda = 1, 2.
\end{equation}

\subsubsection{守恒量}

下面我们推导动量和自旋角动量的公式。轨道角动量的由于是动量衍生出来的量，我们暂不考虑。
首先假设$p^\mu \propto (1, 0, 0, 1)$。
按照\eqref{eq:spin-angular-momentum}可以计算得到
\[
    {S}_3 = \int \dd[3]{\vb*{x}} \mathcal{S}_3 = \ii \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} (- {a}_{\vb*{p},1} {a}^\dagger_{\vb*{p}, 2} + {a}^\dagger_{\vb*{p}, 1} {a}_{\vb*{p}, 2} + {a}_{\vb*{p}, 2} {a}_{\vb*{p}, 1}^\dagger - {a}_{\vb*{p}, 2}^\dagger {a}_{\vb*{p}, 1} ) ,
\]
另外两个方向上的自旋角动量都是零。

我们原本预期矢量场会有三个自由度（因为\eqref{eq:lorentz-gauge}消除掉了一个自由度），但是实际上无质量矢量场只有两个自由度。
导致这一切的原因当然是无质量这个事实——它使得四维动量$p$不再能够写成$(1, 0, 0, 0)$这样的形式，而只能够写成$(1,0,0,1)$这样，从而让$A^0$和$A^3$相互抵消了。
从洛伦兹群在态空间上的表示出发可以更好地看待这个问题：$m=0$时洛伦兹群保持动量不变的小群不再是旋转群。
以一种更加物理的视角，无质量矢量场对应的粒子一直在以光速运动，不能找到一个相对它静止的参考系，因此对一个这样的粒子，实际上总是有一个特定的空间方向即它的运动方向，为了保持协变性，其自旋只能够沿着这个方向。换而言之，此时有意义的实际上是螺旋度而不是三维的角动量${\vb*{S}}$，即其内禀自由度是平面旋转群（以运动方向为轴旋转）的表示而不是三维旋转群的表示。
而对有质量的粒子，总是可以找到一个相对它静止的参考系，在这个参考系中空间是各向同性的，因此可以应用$SO(3)$的表示。
这和经典电磁场的偏振只有两个方向是对应的。
% TODO：经典场的傅里叶分量就是量子的产生湮灭算符

% TODO：场实际上只有两个自由度，因此粒子也只有两个内禀自由度，因此螺旋度是粒子的内禀自由度空间的CSCO。

% TODO：所以总之就是，无质量矢量场的自旋只在动量的方向上有非零分量，因此描述无质量矢量场的粒子的内禀自由度需要的实际上是螺度

\subsubsection{传播子}

由于洛伦兹度规的空间部分全部都是负的，我们有
\begin{equation}
    D_F = \mel*{0}{T A_{\mu}(x) A_{\nu}(y)}{0} = - \int \frac{\dd[4]{p}}{(2\pi)^4} \frac{\ii \eta_{\mu \nu}}{p^2 + \ii 0^+} \ee^{- \ii p \cdot (x - y)} = \int \frac{\dd[4]{p}}{(2\pi)^4} \frac{\ii \delta_{\mu \nu}}{p^2 + \ii 0^+} \ee^{- \ii p \cdot (x - y)}.
\end{equation}

有一点应该指出：规范选取\eqref{eq:gupia-blenlder}是作用在态上的。
这就是说，% TODO：虚光子？？？

\subsection{重矢量场的正则量子化}

\subsection{路径积分量子化和规范固定}

我们现在从路径积分的角度量子化无质量矢量场。我们首先尝试朴素地直接将$m=0$的\eqref{eq:proca-lagrangian}放入$\ee$指数，通过分部积分，得到
\begin{equation}
    S = - \frac{1}{4} \int \dd[4]{x} F_{\mu \nu} F^{\mu \nu} = \frac{1}{2} \int \dd[4]{x} = \frac{1}{2} \int \dd[4]{x} A^\mu (\eta_{\mu \nu} \partial^2 - \partial_\mu \partial_\nu) A^\nu,
\end{equation}
那么，合乎情理的下一步就是取积分核$(\eta_{\mu \nu} \partial^2 - \partial_\mu \partial_\nu)$的逆。
现在问题出现了：这个积分核根本就没有逆——其行列式为零。
因此，直接将$m=0$的\eqref{eq:proca-lagrangian}放入$\ee$指数得到的结果是发散的。
这当然是因为我们没有做规范固定。对无相互作用的无质量矢量场，局域对称操作
\[
    A^\mu \longrightarrow A^\mu + \partial^\mu \alpha
\]
不改变哈密顿量。实际上这是一个规范对称性，即这个局域操作不会改变量子态。然而，朴素地做路径积分不会考虑这一点，从而路径积分会对本该只求和一遍的场构型求和无数多遍。

本节将使用\concept{Faddeev-Popov量子化}方法，大致的思路是通过适当手段插入一个$\delta$函数，对一族规范等价的场构型，只挑选其中一个纳入路径积分。
这一方法的不足之处在于可能还不能消除所有的规范冗余性，但是对微扰计算来说，由于场构型的变动总是充分小的，Faddeev-Popov量子化足够给出可靠的答案。
我们在朴素版本的配分函数的$A$的积分后面插入
\[
    1 = \int \fd{\alpha} \delta(G(A^\alpha)) \det\left( \fdv{G(A^\alpha)}{\alpha} \right),
\]
其中$A^\alpha$就是$A+\partial \alpha$。这样就有
\[
    \begin{aligned}
        Z &= \int \fd{A} \int \fd{\alpha} \delta(G(A^\alpha)) \det\left( \fdv{G(A^\alpha)}{\alpha} \right) \ee^{\ii S[A]} \\
        &= \int \fd{\alpha} \int \fd{A^\alpha} \delta(G(A^\alpha)) \det\left( \fdv{G(A^\alpha)}{\alpha} \right) \ee^{\ii S[A^\alpha]},
    \end{aligned}
\]
其中$A^\alpha$的积分测度和$A$完全一样，且规范对称性意味着$S[A^\alpha]$和$S[A]$也一样。
为了保持洛伦兹协变性，$G(A)$可以选择为这样：
\begin{equation}
    G(A^\alpha) = \partial^\mu A_\mu^\alpha - \omega(x) = \partial^\mu A_\mu + \partial^2 \alpha - \omega(x),
\end{equation}
其中$\omega$是一个任意的标量函数。这样，雅可比行列式因子就可以提出积分号外，得到
\[
    \begin{aligned}
        Z &= (\det \partial^2) \int \fd{\alpha} \int \fd{A^\alpha} \delta(\partial^\mu A_\mu^\alpha - \omega) \ee^{\ii S[A^\alpha]} \\
        &= (\det \partial^2) \int \fd{\alpha} \int \fd{A} \delta(\partial^\mu A_\mu - \omega)  \ee^{\ii S[A]},
    \end{aligned}
\]
这里我们已经重新标记$A^\alpha$为$A$了。既然$\omega$可以随意变动，我们不妨对所有的$\omega$做一次求和，得到
\[
    \begin{aligned}
        Z' &= \int \fd{\omega} \ee^{-\ii \int \dd[4]{x} \frac{\omega^2}{2 \xi}} (\det \partial^2) \int \fd{\alpha} \int \fd{A} \delta(\partial^\mu A_\mu - \omega)  \ee^{\ii S[A]} \\
        &= (\det \partial^2) \int \fd{\alpha} \int \fd{A} \ee^{\ii S[A]} \exp(- \ii \int \dd[4]{x} \frac{1}{2 \xi} (\partial^\mu A_\mu)^2).
    \end{aligned}
\]
现在可以把前面的一大堆因子全部扔掉，得到最后的配分函数：
\begin{equation}
    Z = \int \fd{A} \exp(\ii \int \dd[4]{x} \left( - \frac{1}{4} F_{\mu \nu} F^{\mu \nu} - \frac{1}{2 \xi} (\partial^\mu A_\mu)^2\right)).
\end{equation}
可以看到，这实际上就是向拉氏量加了一个\concept{规范固定项}，破坏了拉氏量的规范对称性，但是得到的物理是完全一样的。
$\xi=1$称为\concept{费曼规范}，和\eqref{eq:maxwell-lagrangian-fixed}是一致的；$\xi=0$称为\concept{朗道规范}。

做完规范固定之后，可以按照正常的手续求出传播子。通过分部积分将作用量写成
\[
    S = \int \dd[4]{x} (A^\mu (\eta_{\mu \nu} \partial^2 - (1 - \frac{1}{\xi}) \partial_\mu \partial_\nu) A^\nu),
\]
于是
\[
    \mel{0}{T A_\mu(x) A_\nu(y)}{0} = \int \frac{\dd[4]{x}}{(2\pi)^4} \frac{\ii}{-k^2 \eta^{\mu \nu} + (1 - \frac{1}{\xi}) k^\mu k^\nu},
\]
并需要加上一个无穷小虚部。我们会发现
\[
    \left( -k^2 \eta^{\mu \nu} + (1 - \frac{1}{\xi}) k^\mu k^\nu \right) \left(\eta_{\nu \rho} - (1 - \xi) \frac{k_\nu k_\rho}{k^2} \right) = - k^2 \delta^\mu_\rho,
\]
于是
\begin{equation}
    D_F(x - y)_{\mu \nu} = \mel*{0}{T A_\mu(x) A_\nu(y)}{0} = \int \frac{\dd[4]{k}}{(2\pi)^4} \frac{-\ii}{k^2 + \ii 0^+} \left( \eta_{\mu \nu} - (1 - \xi) \frac{k_\mu k_\nu}{k^2} \right).
\end{equation}
这里多出来的一个负号是因为，在标量场和旋量场中，拉氏量动能项的两个导数算符分别作用在两个场上，将一个场视为入射，一个视为出射，切换到动量空间，得到的是$- \ii k \cdot \ii k = k^2$，而在这里，两个导数算符都作用在右边的场上，得到的是$(\ii k)^2=-k^2$。
请注意上式已经是做完规范固定之后的结果，无需再额外做任何规范固定，这就是说，对一张费曼图的中间态求和时，$\mu$和$\nu$的确要取遍$0$到$4$。
只有入射光子外线和出射光子外线需要特别选择。